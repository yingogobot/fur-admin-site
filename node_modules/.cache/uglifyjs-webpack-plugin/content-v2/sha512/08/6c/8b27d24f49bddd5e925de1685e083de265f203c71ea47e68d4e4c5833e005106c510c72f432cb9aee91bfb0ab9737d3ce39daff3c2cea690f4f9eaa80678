{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{\"+Lc1\":function(t,e,n){\"use strict\";var i=n(\"DyJX\");e.a={getAllMarketingOrder:function(t){return new Promise(function(e,n){i.a.post(\"order/get_all\",t).then(function(t){return e(t)}).catch(function(t){return n(t)})})},getMarketingOrderCount:function(){return new Promise(function(t,e){i.a.post(\"order/get_count\").then(function(e){return t(e)}).catch(function(t){return e(t)})})},getMarketingOrderInReviewCount:function(){return new Promise(function(t,e){i.a.post(\"order/get_in_review_count\").then(function(e){return t(e)}).catch(function(t){return e(t)})})},addMarketingOrder:function(t){return new Promise(function(e,n){i.a.post(\"order/add\",t).then(function(t){return e(t)}).catch(function(t){return n(t)})})},deleteMarketingOrder:function(t){return new Promise(function(e,n){var a={id:t};i.a.post(\"order/delete\",a).then(function(t){return e(t)}).catch(function(t){return n(t)})})},updateMarketingOrderDeliveryCode:function(t){return new Promise(function(e,n){i.a.post(\"order/update_delivery_code\",t).then(function(t){return e()}).catch(function(t){return n(t)})})},addBulkMarketingOrder:function(t){return new Promise(function(e,n){i.a.post(\"order/bulk_add\",t).then(function(t){return e(t)}).catch(function(t){return n(t)})})}}},\"6AVv\":function(t,e,n){},\"86NN\":function(t,e,n){\"use strict\";var i=n(\"DyJX\");e.a={fetchAllInventorys:function(t){return new Promise(function(e,n){i.a.post(\"inventory/all_inventorys\",t).then(function(t){return e(t)}).catch(function(t){return n(t)})})},getAllInventoryCount:function(t){return new Promise(function(e,n){i.a.post(\"inventory/count_inventorys\",t).then(function(t){return e(t)}).catch(function(t){return n(t)})})},getAllInventoryTpes:function(t){return new Promise(function(e,n){var a={inventory_type:t};i.a.post(\"inventory/inventory_types\",a).then(function(t){return e(t)}).catch(function(t){return n(t)})})},addNewInventoryRequest:function(t){return new Promise(function(e,n){i.a.post(\"inventory/add\",t).then(function(t){return e(t)}).catch(function(t){return n(t)})})},getStorage:function(){return new Promise(function(t,e){i.a.post(\"inventory/storage\").then(function(e){return t(e)}).catch(function(t){return e(t)})})},getProductStorage:function(t){return new Promise(function(e,n){var a={product_id:t};i.a.post(\"inventory/storage\",a).then(function(t){return e(t)}).catch(function(t){return n(t)})})}}},S4mp:function(t,e,n){\"use strict\";var i=n(\"DyJX\");e.a={getAllResalers:function(t){return new Promise(function(e,n){i.a.post(\"resaler/get_all\",t).then(function(t){return e(t)}).catch(function(t){return n(t)})})},getResalersCount:function(){return new Promise(function(t,e){i.a.post(\"resaler/get_count\").then(function(e){return t(e)}).catch(function(t){return e(t)})})},addResaler:function(t){return new Promise(function(e,n){i.a.post(\"resaler/add\",t).then(function(t){return e(t)}).catch(function(t){return n(t)})})},deleteResaler:function(t){return new Promise(function(e,n){var a={id:t};i.a.post(\"resaler/delete\",a).then(function(t){return e(t)}).catch(function(t){return n(t)})})},getAllResalerRegions:function(t){return new Promise(function(e,n){i.a.post(\"resaler/get_all_regions\",t).then(function(t){return e(t)}).catch(function(t){return n(t)})})},getResalerRegionsCount:function(){return new Promise(function(t,e){i.a.post(\"resaler/get_region_count\").then(function(e){return t(e)}).catch(function(t){return e(t)})})},addResalerRegion:function(t){return new Promise(function(e,n){i.a.post(\"resaler/add_region\",t).then(function(t){return e(t)}).catch(function(t){return n(t)})})},addResalerRegionManager:function(t){return new Promise(function(e,n){i.a.post(\"resaler/add_region_manager\",t).then(function(t){return e(t)}).catch(function(t){return n(t)})})},removeResalerRegionManager:function(t){return new Promise(function(e,n){i.a.post(\"resaler/remove_region_manager\",t).then(function(t){return e(t)}).catch(function(t){return n(t)})})},getAllResalerAreas:function(t){return new Promise(function(e,n){i.a.post(\"resaler/get_all_areas\",t).then(function(t){return e(t)}).catch(function(t){return n(t)})})},getResalerAreasCount:function(){return new Promise(function(t,e){i.a.post(\"resaler/get_area_count\").then(function(e){return t(e)}).catch(function(t){return e(t)})})},addResalerArea:function(t){return new Promise(function(e,n){i.a.post(\"resaler/add_area\",t).then(function(t){return e(t)}).catch(function(t){return n(t)})})},addResalerAreaManager:function(t){return new Promise(function(e,n){i.a.post(\"resaler/add_area_manager\",t).then(function(t){return e(t)}).catch(function(t){return n(t)})})},removeResalerAreaManager:function(t){return new Promise(function(e,n){i.a.post(\"resaler/remove_area_manager\",t).then(function(t){return e(t)}).catch(function(t){return n(t)})})},getResalerTypes:function(){return new Promise(function(t,e){i.a.post(\"resaler/get_all_types\").then(function(e){return t(e)}).catch(function(t){return e(t)})})}}},TuCM:function(t,e,n){\"use strict\";var i=n(\"WdqM\");n.n(i).a},WdqM:function(t,e,n){},XxQY:function(t,e,n){\"use strict\";var i=n(\"6AVv\");n.n(i).a},lAbF:function(t,e,n){\"use strict\";n.r(e);var i=function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"dashboard-container\"},[e(\"adminDashboard\")],1)};i._withStripped=!0;var a=n(\"L2JU\"),r=function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"dashboard-editor-container\"},[e(\"panel-group\",{on:{handleSetLineChartData:this.handleSetLineChartData}})],1)};r._withStripped=!0;var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",[n(\"el-row\",{staticClass:\"panel-group\",attrs:{gutter:40}},[n(\"el-col\",{staticClass:\"card-panel-col\",attrs:{xs:12,sm:12,lg:4}},[n(\"div\",{staticClass:\"card-panel\",on:{click:function(e){return t.handleSetLineChartData(\"newVisitis\")}}},[n(\"div\",{staticClass:\"card-panel-text\"},[t._v(\" 当前月份 \")]),t._v(\" \"),n(\"div\",{staticClass:\"card-panel-num\"},[t._v(t._s(t.moment().format(\"YYYY-MM\")))])])]),t._v(\" \"),n(\"el-col\",{staticClass:\"card-panel-col\",attrs:{xs:12,sm:12,lg:4}},[n(\"div\",{staticClass:\"card-panel\",on:{click:function(e){return t.handleSetLineChartData(\"shoppings\")}}},[n(\"div\",{staticClass:\"card-panel-text\"},[t._v(\" 本月库存盘点状态 \")]),t._v(\" \"),n(\"div\",{staticClass:\"card-panel-small\"},[t._v(\"\\n         （功能尚未开放）\\n        \")])])]),t._v(\" \"),n(\"el-col\",{staticClass:\"card-panel-col\",attrs:{xs:12,sm:12,lg:6}},[n(\"div\",{staticClass:\"card-panel\",on:{click:function(e){return t.handleSetLineChartData(\"purchases\")}}},[n(\"div\",{staticClass:\"card-panel-text\"},[t._v(\" 新建订单 \")]),t._v(\" \"),n(\"div\",{staticClass:\"card-panel-button\"},[t.canCreateSalesOrder()?n(\"el-button\",{attrs:{type:\"primary\",plain:\"\"},on:{click:t.handleCreateSalesOrder}},[t._v(\"新建分销订单\")]):t._e(),t._v(\" \"),t.canCreateMarketingOrder()?n(\"el-button\",{attrs:{type:\"warning\",plain:\"\"},on:{click:t.handleCreateMarketingOrder}},[t._v(\"新建市场推广订单\")]):t._e()],1)])]),t._v(\" \"),n(\"el-col\",{staticClass:\"card-panel-col\",attrs:{xs:12,sm:12,lg:4}},[t.canCreateSalesOrder()?n(\"div\",{staticClass:\"card-panel\",on:{click:function(e){return t.goToSalesInReviewPage()}}},[n(\"div\",{staticClass:\"card-panel-text\"},[t._v(\" 未审核\"),n(\"span\",{staticStyle:{color:\"red\"}},[t._v(\"销售订单\")])]),t._v(\" \"),n(\"div\",{staticClass:\"card-panel-num\"},[n(\"count-to\",{staticClass:\"card-panel-num\",attrs:{\"start-val\":0,\"end-val\":this.inReivewSalesCount,duration:1200}})],1)]):t._e()]),t._v(\" \"),n(\"el-col\",{staticClass:\"card-panel-col\",attrs:{xs:12,sm:12,lg:4}},[t.canCreateSalesOrder()?n(\"div\",{staticClass:\"card-panel\",on:{click:function(e){return t.goToMarketingOrderInReviewPage()}}},[n(\"div\",{staticClass:\"card-panel-text\"},[t._v(\" 未审核\"),n(\"span\",{staticStyle:{color:\"blue\"}},[t._v(\"推广订单\")])]),t._v(\" \"),n(\"div\",{staticClass:\"card-panel-num\"},[n(\"count-to\",{staticClass:\"card-panel-num\",attrs:{\"start-val\":0,\"end-val\":this.inReivewMarketingOrderCount,duration:1200}})],1)]):t._e()])],1),t._v(\" \"),n(\"el-dialog\",{attrs:{title:\"添加新销售\",visible:t.dialogFormVisible,width:\"80%\"},on:{\"update:visible\":function(e){t.dialogFormVisible=e}}},[n(\"el-form\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.listLoading,expression:\"listLoading\"}],ref:\"dataForm\",staticStyle:{\"margin-left\":\"20px\"},attrs:{model:t.temp,\"label-position\":\"left\",\"label-width\":\"10px\"}},[n(\"div\",{staticStyle:{display:\"inline-block\"}},[n(\"div\",{staticStyle:{display:\"inline-block\",\"margin-bottom\":\"40px\"}},[n(\"h3\",{staticStyle:{display:\"inline-block\"}},[t._v(\" 分销大区 \")]),t._v(\" \"),n(\"el-form-item\",{staticStyle:{display:\"inline-block\",\"margin-left\":\"10px\"},attrs:{prop:\"type\"}},[n(\"el-select\",{attrs:{\"value-key\":\"id\",placeholder:\"选择分销大区\"},on:{change:function(e){return t.getAreas()},clear:function(e){return t.getAreas()}},model:{value:t.temp.region,callback:function(e){t.$set(t.temp,\"region\",e)},expression:\"temp.region\"}},t._l(t.resalerRegions,function(t){return n(\"el-option\",{key:t.id,attrs:{label:t.title,value:t}})}),1)],1),t._v(\" \"),n(\"div\",[t._v(\" 大区经理： \"+t._s(t.temp.region?t.temp.region.manager_name:\"\")+\" \")])],1),t._v(\" \"),n(\"div\",{staticStyle:{display:\"inline-block\",\"margin-left\":\"15px\"}},[n(\"h3\",{staticStyle:{display:\"inline-block\"}},[t._v(\" 分销地区 \")]),t._v(\" \"),n(\"el-form-item\",{staticStyle:{display:\"inline-block\",\"margin-left\":\"10px\"},attrs:{prop:\"type\"}},[n(\"el-select\",{attrs:{\"value-key\":\"id\",placeholder:\"选择分销地区\"},on:{change:function(e){return t.getResalers()},clear:function(e){return t.clearResaler()}},model:{value:t.temp.area,callback:function(e){t.$set(t.temp,\"area\",e)},expression:\"temp.area\"}},t._l(t.resalerAreas,function(t){return n(\"el-option\",{key:t.id,attrs:{label:t.title,value:t}})}),1)],1),t._v(\" \"),n(\"div\",[t._v(\" 地区经理： \"+t._s(t.temp.area?t.temp.area.area_manager_name:\"\")+\" \")])],1),t._v(\" \"),n(\"div\",{staticStyle:{display:\"inline-block\",\"margin-left\":\"15px\"}},[n(\"h3\",{staticStyle:{display:\"inline-block\"}},[t._v(\" 分销渠道 \")]),t._v(\" \"),n(\"el-form-item\",{staticStyle:{display:\"inline-block\"},attrs:{prop:\"type\"}},[n(\"el-select\",{attrs:{\"value-key\":\"id\",placeholder:\"选择分销渠道\"},model:{value:t.temp.resaler,callback:function(e){t.$set(t.temp,\"resaler\",e)},expression:\"temp.resaler\"}},t._l(t.resalers,function(t){return n(\"el-option\",{key:t.id,attrs:{label:t.name,value:t}})}),1)],1),t._v(\" \"),n(\"div\",[t._v(\" 联系人： \"+t._s(t.temp.resaler?t.temp.resaler.contact+\" \"+t.temp.resaler.phone:\"\")+\" \")])],1)]),t._v(\" \"),n(\"div\",[n(\"h3\",{staticStyle:{display:\"inline-block\",width:\"100px\",\"vertical-align\":\"top\",\"margin-top\":\"0\"}},[t._v(\" 添加销售产品 \")]),t._v(\" \"),n(\"div\",{staticStyle:{\"margin-bottom\":\"20px\"}},[t._v(\" \\n          作弊工具：\\n          \"),n(\"el-button\",{attrs:{type:\"info\"},on:{click:function(e){return t.addAllProductBySubType(1)}}},[t._v(\"\\n            添加小冻干套装\\n          \")]),t._v(\" \"),n(\"el-button\",{attrs:{type:\"info\"},on:{click:function(e){return t.addAllProductBySubType(2)}}},[t._v(\"\\n            添加大冻干套装\\n          \")]),t._v(\" \"),n(\"el-button\",{attrs:{type:\"info\"},on:{click:function(e){return t.addAllProductBySubType(3)}}},[t._v(\"\\n            添加肉干套装\\n          \")]),t._v(\" \"),n(\"el-button\",{attrs:{type:\"info\"},on:{click:function(e){return t.addAllProductBySubType(4)}}},[t._v(\"\\n            添加狗鲜粮套装\\n          \")]),t._v(\" \"),n(\"el-button\",{attrs:{type:\"info\"},on:{click:function(e){return t.addAllProductBySubType(5)}}},[t._v(\"\\n            添加猫鲜粮套装\\n          \")]),t._v(\" \"),n(\"el-button\",{attrs:{type:\"info\"},on:{click:function(e){return t.addAllProductBySubType(6)}}},[t._v(\"\\n            添加猫条套装\\n          \")])],1),t._v(\" \"),n(\"div\",{staticStyle:{display:\"inline-block\"}},[n(\"div\",{staticStyle:{\"margin-bottom\":\"5px\"}},[n(\"div\",{staticClass:\"input-title input-title-extra-long\"},[t._v(\"产品类型\")]),t._v(\" \"),n(\"div\",{staticClass:\"input-title input-title-extra-long\"},[t._v(\"产品分类\")]),t._v(\" \"),n(\"div\",{staticClass:\"input-title input-title-extra-long\"},[t._v(\"产品名称\")]),t._v(\" \"),n(\"div\",{staticClass:\"input-title input-title-short\"},[t._v(\"零售价\")]),t._v(\" \"),n(\"div\",{staticClass:\"input-title input-title-short\"},[t._v(\"剩余库存\")]),t._v(\" \"),n(\"div\",{staticClass:\"input-title input-title-short\"},[t._v(\"销售数量\")]),t._v(\" \"),n(\"div\",{staticClass:\"input-title input-title-short\"},[t._v(\"赠送数量\")]),t._v(\" \"),n(\"div\",{staticClass:\"input-title input-title\"},[t._v(\"产品折扣\")]),t._v(\" \"),n(\"div\",{staticClass:\"input-title input-title-extra-long\"},[t._v(\"总价\")]),t._v(\" \"),n(\"div\",{staticClass:\"input-title input-title-extra-long\"},[t._v(\"备注\")])]),t._v(\" \"),t._l(t.temp.products,function(e,i){return n(\"el-form-item\",{key:e.id,staticStyle:{\"margin-bottom\":\"10px\"},attrs:{label:\"\",prop:\"product\"}},[n(\"el-select\",{staticClass:\"filter-item\",staticStyle:{width:\"150px\"},attrs:{\"value-key\":\"id\",placeholder:\"产品类型\",clearable:\"\"},on:{change:function(n){return t.getSubType(e)},clear:function(n){return t.getSubType(e)}},model:{value:e.product_type,callback:function(n){t.$set(e,\"product_type\",n)},expression:\"p.product_type\"}},t._l(t.productTypes,function(t){return n(\"el-option\",{key:t.id,attrs:{label:t.title,value:t}})}),1),t._v(\" \"),t.temp.products[i].product_type?n(\"el-select\",{staticClass:\"filter-item inventory-in-input-extra\",attrs:{\"value-key\":\"id\",placeholder:\"产品分类\",clearable:\"\"},on:{change:function(n){return t.getProductBySubType(e.product_sub_type,e)},clear:function(n){return t.getProductBySubType(e.product_sub_type,e)}},model:{value:e.product_sub_type,callback:function(n){t.$set(e,\"product_sub_type\",n)},expression:\"p.product_sub_type\"}},t._l(t.temp.products[i].product_type.sub_type,function(t){return n(\"el-option\",{key:t.id,attrs:{label:t.title,value:t}})}),1):t._e(),t._v(\" \"),t.temp.products[i].product_sub_type?n(\"el-select\",{staticClass:\"filter-item inventory-in-input-extra\",attrs:{\"value-key\":\"id\",placeholder:\"产品名称\",clearable:\"\"},on:{change:function(n){return t.readProductInfo(e)},clear:function(n){return t.readProductInfo(e)}},model:{value:e.product,callback:function(n){t.$set(e,\"product\",n)},expression:\"p.product\"}},t._l(t.temp.products[i].product_sub_type.products,function(t){return n(\"el-option\",{key:t.id,attrs:{label:t.title,value:t}})}),1):t._e(),t._v(\" \"),n(\"el-input\",{staticClass:\"filter-item inventory-in-input-short\",attrs:{placeholder:\"零售价\",disabled:!0},model:{value:e.price,callback:function(n){t.$set(e,\"price\",n)},expression:\"p.price\"}}),t._v(\" \"),n(\"el-input\",{staticClass:\"filter-item inventory-in-input-short\",attrs:{placeholder:\"库存数量\",disabled:!0},model:{value:e.in_storage_quantity,callback:function(n){t.$set(e,\"in_storage_quantity\",n)},expression:\"p.in_storage_quantity\"}}),t._v(\" \"),n(\"el-input\",{staticClass:\"filter-item inventory-in-input-short\",attrs:{placeholder:\"销售数量\"},on:{change:function(n){return t.calculateTotalPrice(e)}},model:{value:e.quantity,callback:function(n){t.$set(e,\"quantity\",n)},expression:\"p.quantity\"}}),t._v(\" \"),n(\"el-input\",{staticClass:\"filter-item inventory-in-input-short\",attrs:{placeholder:\"赠送数量\"},on:{change:function(n){return t.calculateTotalPrice(e)}},model:{value:e.promotion_quantity,callback:function(n){t.$set(e,\"promotion_quantity\",n)},expression:\"p.promotion_quantity\"}}),t._v(\" \"),n(\"el-input\",{staticClass:\"filter-item inventory-in-input\",attrs:{placeholder:\"折扣率\",clearable:\"\"},on:{change:function(n){return t.calculateTotalPrice(e)}},model:{value:e.discount_rate,callback:function(n){t.$set(e,\"discount_rate\",n)},expression:\"p.discount_rate\"}}),t._v(\" \"),n(\"el-input\",{staticClass:\"filter-item inventory-in-input-extra\",attrs:{placeholder:\"总价\",clearable:\"\",disabled:!0},model:{value:e.total_price,callback:function(n){t.$set(e,\"total_price\",n)},expression:\"p.total_price\"}}),t._v(\" \"),n(\"el-input\",{staticClass:\"filter-item inventory-in-input-extra\",attrs:{placeholder:\"备注\",clearable:\"\"},model:{value:e.note,callback:function(n){t.$set(e,\"note\",n)},expression:\"p.note\"}}),t._v(\" \"),n(\"el-button\",{staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"danger\",icon:\"el-icon-delete\"},on:{click:function(e){return t.removeProduct(i)}}})],1)}),t._v(\" \"),n(\"el-form-item\",[n(\"el-button\",{staticStyle:{width:\"150px\"},attrs:{type:\"primary\",plain:\"\"},on:{click:t.addMoreProduct}},[t._v(\"添加产品\")]),t._v(\" \"),n(\"div\",[t._v(\" 产品折扣为0-1，例如：9折，则填写0.9\")])],1)],2),t._v(\" \"),n(\"div\",{staticStyle:{\"margin-bottom\":\"20px\"}},[n(\"h3\",{staticClass:\"section-title\"},[t._v(\" 汇总信息 \")]),t._v(\" \"),n(\"div\",{staticStyle:{display:\"inline-block\",width:\"150px\"}},[n(\"h3\",{staticClass:\"middle-title\"},[t._v(\" 订单销售总价 \")]),t._v(\" \"),n(\"el-input\",{staticClass:\"filter-item\",attrs:{placeholder:\"订单总价\",clearable:\"\",disabled:!0},model:{value:t.temp.order_total_price,callback:function(e){t.$set(t.temp,\"order_total_price\",e)},expression:\"temp.order_total_price\"}})],1),t._v(\" \"),n(\"div\",{staticStyle:{display:\"inline-block\",width:\"150px\"}},[n(\"h3\",{staticClass:\"middle-title\"},[t._v(\" 订单实收总价 \")]),t._v(\" \"),n(\"el-input\",{staticClass:\"filter-item\",attrs:{placeholder:\"订单总价\",clearable:\"\",disabled:!0},model:{value:t.temp.order_total_revenue,callback:function(e){t.$set(t.temp,\"order_total_revenue\",e)},expression:\"temp.order_total_revenue\"}})],1),t._v(\" \"),n(\"div\",{staticStyle:{\"margin-left\":\"10px\",display:\"inline-block\",width:\"150px\"}},[n(\"h3\",{staticClass:\"middle-title\"},[t._v(\" 订单总利润 \")]),t._v(\" \"),n(\"el-input\",{staticClass:\"filter-item\",attrs:{placeholder:\"订单总利润\",clearable:\"\",disabled:!0},model:{value:t.temp.order_total_profit,callback:function(e){t.$set(t.temp,\"order_total_profit\",e)},expression:\"temp.order_total_profit\"}})],1)]),t._v(\" \"),n(\"div\",{staticStyle:{\"margin-bottom\":\"20px\"}},[n(\"div\",{staticStyle:{display:\"inline-block\"}},[n(\"h3\",{staticClass:\"section-title\"},[t._v(\" 支付公司 \")]),t._v(\" \"),n(\"el-select\",{staticClass:\"filter-item\",staticStyle:{width:\"400px\"},attrs:{\"value-key\":\"id\",placeholder:\"支付公司\",clearable:\"\"},model:{value:t.temp.payment_company,callback:function(e){t.$set(t.temp,\"payment_company\",e)},expression:\"temp.payment_company\"}},t._l(t.paymentCompany,function(t){return n(\"el-option\",{key:t.id,attrs:{label:t.title,value:t}})}),1)],1),t._v(\" \"),t.temp.payment_company?n(\"div\",{staticStyle:{display:\"inline-block\",\"margin-left\":\"20px\"}},[n(\"h3\",{staticClass:\"section-title\"},[t._v(\" 支付方式 \")]),t._v(\" \"),n(\"el-select\",{staticClass:\"filter-item\",staticStyle:{width:\"300px\"},attrs:{\"value-key\":\"id\",placeholder:\"支付方式\",clearable:\"\"},model:{value:t.temp.payment_channel,callback:function(e){t.$set(t.temp,\"payment_channel\",e)},expression:\"temp.payment_channel\"}},t._l(t.temp.payment_company.paymentChannel,function(t){return n(\"el-option\",{key:t.id,attrs:{label:t.title,value:t}})}),1)],1):t._e()]),t._v(\" \"),n(\"div\",{staticStyle:{\"margin-bottom\":\"20px\"}},[n(\"h3\",{staticClass:\"section-title\"},[t._v(\" 订单日期 \")]),t._v(\" \"),n(\"el-date-picker\",{attrs:{align:\"right\",type:\"date\",placeholder:\"选择日期\",\"picker-options\":t.pickerOptions},model:{value:t.temp.date,callback:function(e){t.$set(t.temp,\"date\",e)},expression:\"temp.date\"}})],1),t._v(\" \"),n(\"div\",[n(\"h3\",{staticClass:\"section-title\"},[t._v(\" 备注 \")]),t._v(\" \"),n(\"el-input\",{staticStyle:{width:\"70%\"},attrs:{type:\"textarea\",autosize:{minRows:2,maxRows:4},placeholder:\"备注\"},model:{value:t.temp.note,callback:function(e){t.$set(t.temp,\"note\",e)},expression:\"temp.note\"}})],1)])]),t._v(\" \"),n(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[n(\"el-button\",{on:{click:function(e){return t.dismissAddOrderDialog()}}},[t._v(\"\\n        取消\\n      \")]),t._v(\" \"),n(\"el-button\",{attrs:{type:\"primary\",loading:t.listLoading},on:{click:function(e){return t.addSalesOrder()}}},[t._v(\"\\n        提交新的销售订单\\n      \")])],1)],1),t._v(\" \"),n(\"el-dialog\",{attrs:{title:\"添加新市场订单\",visible:t.marketingOrderDialogFormVisible,width:\"80%\"},on:{\"update:visible\":function(e){t.marketingOrderDialogFormVisible=e}}},[n(\"el-form\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.listLoading,expression:\"listLoading\"}],ref:\"dataForm\",staticStyle:{\"margin-left\":\"20px\"},attrs:{model:t.marketingOrderTemp,\"label-position\":\"left\",\"label-width\":\"10px\"}},[n(\"div\",[n(\"div\",{staticStyle:{display:\"inline-block\",\"margin-bottom\":\"20px\"}},[n(\"h3\",{staticStyle:{display:\"inline-block\"}},[t._v(\" 申请部门 \")]),t._v(\" \"),n(\"el-select\",{staticClass:\"filter-item\",staticStyle:{width:\"150px\",\"margin-left\":\"20px\"},attrs:{\"value-key\":\"id\",placeholder:\"申请部门\",clearable:\"\"},model:{value:t.marketingOrderTemp.department,callback:function(e){t.$set(t.marketingOrderTemp,\"department\",e)},expression:\"marketingOrderTemp.department\"}},t._l(this.departments,function(t){return n(\"el-option\",{key:t.id,attrs:{label:t.name,value:t}})}),1)],1),t._v(\" \"),n(\"div\",{staticStyle:{display:\"inline-block\",\"margin-left\":\"20px\"}},[n(\"h3\",{staticStyle:{display:\"inline-block\"}},[t._v(\" 申请人 \")]),t._v(\" \"),n(\"el-input\",{staticClass:\"filter-item inventory-in-input-extra\",attrs:{placeholder:\"申请人\",disabled:!0},model:{value:this.name,callback:function(e){t.$set(this,\"name\",e)},expression:\"this.name\"}})],1)]),t._v(\" \"),n(\"div\",{staticStyle:{display:\"inline-block\",\"margin-bottom\":\"40px\"}},[n(\"el-radio\",{attrs:{label:\"1\"},model:{value:t.uploadType,callback:function(e){t.uploadType=e},expression:\"uploadType\"}},[t._v(\"单个上传\")]),t._v(\" \"),n(\"el-radio\",{attrs:{label:\"2\"},model:{value:t.uploadType,callback:function(e){t.uploadType=e},expression:\"uploadType\"}},[t._v(\"批量上传\")])],1),t._v(\" \"),\"2\"===t.uploadType?n(\"div\",[n(\"div\",{staticStyle:{display:\"block\",\"margin-left\":\"20px\",\"margin-bottom\":\"40px\"}},[n(\"h3\",{staticStyle:{display:\"inline-block\"}},[t._v(\" 批量上传Excel \")]),t._v(\" \"),n(\"input\",{ref:\"fileInput\",attrs:{type:\"file\"},on:{change:t.onReadExcelFileChange}}),t._v(\" \"),n(\"el-button\",{on:{click:function(e){return t.clearExcelFileInput()}}},[t._v(\"\\n            清除文件\\n          \")])],1),t._v(\" \"),n(\"div\",[n(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:t.bulkInputData,border:\"\",\"span-method\":t.objectSpanMethod,height:\"250\"}},[n(\"el-table-column\",{attrs:{prop:\"name\",label:\"客户姓名\",width:\"180\"}}),t._v(\" \"),n(\"el-table-column\",{attrs:{prop:\"address\",label:\"客户地址\",width:\"180\"}}),t._v(\" \"),n(\"el-table-column\",{attrs:{prop:\"contact\",label:\"联系方式\"}}),t._v(\" \"),n(\"el-table-column\",{attrs:{prop:\"product_name\",label:\"产品名称\",width:\"180\"}}),t._v(\" \"),n(\"el-table-column\",{attrs:{prop:\"quantity\",label:\"产品数量\",width:\"180\"}}),t._v(\" \"),n(\"el-table-column\",{attrs:{prop:\"note\",label:\"备注\"}})],1)],1)]):t._e(),t._v(\" \"),\"1\"===t.uploadType?n(\"div\",[n(\"div\",{staticStyle:{display:\"inline-block\",\"margin-bottom\":\"40px\"}},[n(\"div\",{staticStyle:{display:\"inline-block\"}},[n(\"h3\",{staticStyle:{display:\"inline-block\"}},[t._v(\" 客户姓名 \")]),t._v(\" \"),n(\"el-input\",{staticClass:\"filter-item inventory-in-input-extra\",attrs:{placeholder:\"客户姓名\"},model:{value:t.marketingOrderTemp.client_name,callback:function(e){t.$set(t.marketingOrderTemp,\"client_name\",e)},expression:\"marketingOrderTemp.client_name\"}})],1),t._v(\" \"),n(\"div\",{staticStyle:{display:\"inline-block\",\"margin-left\":\"15px\"}},[n(\"h3\",{staticStyle:{display:\"inline-block\"}},[t._v(\" 寄送地址 \")]),t._v(\" \"),n(\"el-input\",{staticClass:\"filter-item inventory-in-input-line\",attrs:{placeholder:\"寄送地址\"},model:{value:t.marketingOrderTemp.shipping_address,callback:function(e){t.$set(t.marketingOrderTemp,\"shipping_address\",e)},expression:\"marketingOrderTemp.shipping_address\"}})],1),t._v(\" \"),n(\"div\",{staticStyle:{display:\"inline-block\",\"margin-left\":\"15px\"}},[n(\"h3\",{staticStyle:{display:\"inline-block\"}},[t._v(\" 联系电话 \")]),t._v(\" \"),n(\"el-input\",{staticClass:\"filter-item inventory-in-input-extra\",attrs:{placeholder:\"联系电话\"},model:{value:t.marketingOrderTemp.contact,callback:function(e){t.$set(t.marketingOrderTemp,\"contact\",e)},expression:\"marketingOrderTemp.contact\"}})],1)]),t._v(\" \"),n(\"div\",[n(\"h3\",{staticStyle:{display:\"inline-block\",width:\"100px\",\"vertical-align\":\"top\",\"margin-top\":\"0\"}},[t._v(\" 添加产品 \")]),t._v(\" \"),n(\"div\",{staticStyle:{display:\"inline-block\"}},[n(\"div\",{staticStyle:{\"margin-bottom\":\"5px\"}},[n(\"div\",{staticClass:\"input-title input-title-extra-long\"},[t._v(\"产品类型\")]),t._v(\" \"),n(\"div\",{staticClass:\"input-title input-title-extra-long\"},[t._v(\"产品分类\")]),t._v(\" \"),n(\"div\",{staticClass:\"input-title input-title-extra-long\"},[t._v(\"产品名称\")]),t._v(\" \"),n(\"div\",{staticClass:\"input-title input-title-short\"},[t._v(\"剩余库存\")]),t._v(\" \"),n(\"div\",{staticClass:\"input-title input-title-short\"},[t._v(\"数量\")]),t._v(\" \"),n(\"div\",{staticClass:\"input-title input-title-extra-long\"},[t._v(\"备注\")])]),t._v(\" \"),t._l(t.marketingOrderTemp.products,function(e,i){return n(\"el-form-item\",{key:e.id,staticStyle:{\"margin-bottom\":\"10px\"},attrs:{label:\"\",prop:\"product\"}},[n(\"el-select\",{staticClass:\"filter-item\",staticStyle:{width:\"150px\"},attrs:{\"value-key\":\"id\",placeholder:\"产品类型\",clearable:\"\"},on:{change:function(n){return t.getSubType(e)},clear:function(n){return t.getSubType(e)}},model:{value:e.product_type,callback:function(n){t.$set(e,\"product_type\",n)},expression:\"p.product_type\"}},t._l(t.productTypes,function(t){return n(\"el-option\",{key:t.id,attrs:{label:t.title,value:t}})}),1),t._v(\" \"),t.marketingOrderTemp.products[i].product_type?n(\"el-select\",{staticClass:\"filter-item inventory-in-input-extra\",attrs:{\"value-key\":\"id\",placeholder:\"产品分类\",clearable:\"\"},on:{change:function(n){return t.getProductBySubType(e.product_sub_type,e)},clear:function(n){return t.getProductBySubType(e.product_sub_type,e)}},model:{value:e.product_sub_type,callback:function(n){t.$set(e,\"product_sub_type\",n)},expression:\"p.product_sub_type\"}},t._l(t.marketingOrderTemp.products[i].product_type.sub_type,function(t){return n(\"el-option\",{key:t.id,attrs:{label:t.title,value:t}})}),1):t._e(),t._v(\" \"),t.marketingOrderTemp.products[i].product_sub_type?n(\"el-select\",{staticClass:\"filter-item inventory-in-input-extra\",attrs:{\"value-key\":\"id\",placeholder:\"产品名称\",clearable:\"\"},on:{change:function(n){return t.readProductInfo(e)},clear:function(n){return t.readProductInfo(e)}},model:{value:e.product,callback:function(n){t.$set(e,\"product\",n)},expression:\"p.product\"}},t._l(t.marketingOrderTemp.products[i].product_sub_type.products,function(t){return n(\"el-option\",{key:t.id,attrs:{label:t.title,value:t}})}),1):t._e(),t._v(\" \"),n(\"el-input\",{staticClass:\"filter-item inventory-in-input-short\",attrs:{placeholder:\"库存数量\",disabled:!0},model:{value:e.in_storage_quantity,callback:function(n){t.$set(e,\"in_storage_quantity\",n)},expression:\"p.in_storage_quantity\"}}),t._v(\" \"),n(\"el-input\",{staticClass:\"filter-item inventory-in-input-short\",attrs:{placeholder:\"销售数量\"},model:{value:e.quantity,callback:function(n){t.$set(e,\"quantity\",n)},expression:\"p.quantity\"}}),t._v(\" \"),n(\"el-input\",{staticClass:\"filter-item inventory-in-input-extra\",attrs:{placeholder:\"备注\",clearable:\"\"},model:{value:e.note,callback:function(n){t.$set(e,\"note\",n)},expression:\"p.note\"}}),t._v(\" \"),n(\"el-button\",{staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"danger\",icon:\"el-icon-delete\"},on:{click:function(e){return t.removeProduct(i)}}})],1)}),t._v(\" \"),n(\"el-form-item\",[n(\"el-button\",{staticStyle:{width:\"150px\"},attrs:{type:\"primary\",plain:\"\"},on:{click:t.addMoreMarketingOrderProduct}},[t._v(\"添加产品\")])],1)],2),t._v(\" \"),n(\"div\",{staticStyle:{\"margin-bottom\":\"20px\"}},[n(\"h3\",{staticClass:\"section-title\"},[t._v(\" 订单日期 \")]),t._v(\" \"),n(\"el-date-picker\",{attrs:{align:\"right\",type:\"date\",placeholder:\"选择日期\",\"picker-options\":t.pickerOptions},model:{value:t.marketingOrderTemp.date,callback:function(e){t.$set(t.marketingOrderTemp,\"date\",e)},expression:\"marketingOrderTemp.date\"}})],1),t._v(\" \"),n(\"div\",[n(\"h3\",{staticClass:\"section-title\"},[t._v(\" 备注 \")]),t._v(\" \"),n(\"el-input\",{staticStyle:{width:\"70%\"},attrs:{type:\"textarea\",autosize:{minRows:2,maxRows:4},placeholder:\"备注\"},model:{value:t.temp.note,callback:function(e){t.$set(t.temp,\"note\",e)},expression:\"temp.note\"}})],1)])]):t._e()]),t._v(\" \"),n(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[n(\"el-button\",{on:{click:function(e){return t.dismissAddOrderDialog()}}},[t._v(\"\\n        取消\\n      \")]),t._v(\" \"),n(\"el-button\",{attrs:{type:\"primary\",loading:t.listLoading},on:{click:function(e){return t.addMarketingOrder()}}},[t._v(\"\\n        提交新的市场订单\\n      \")])],1)],1)],1)};o._withStripped=!0;n(\"f3/d\"),n(\"rGqo\");var s=n(\"23J+\"),l=n(\"0doe\"),c=n(\"7BsA\"),u=n.n(c),d=n(\"xUCC\"),p=n(\"xMja\"),m=n(\"S4mp\"),h=n(\"86NN\"),_=n(\"+Lc1\"),f=n(\"7Qib\"),v=n(\"wd/R\"),y=n.n(v),g={components:{CountTo:u.a},data:function(){return{inReivewSalesCount:0,inReivewMarketingOrderCount:0,listQuery:{page:1,limit:10},listLoading:!1,bulkInputData:[],rowSpans:null,uploadType:\"1\",productTypes:[],productSubTypes:[],selectedProducts:[],products:[],resalerRegions:[],resalerAreas:[],resalers:[],dialogFormVisible:!1,marketingOrderDialogFormVisible:!1,temp:{id:void 0,region:void 0,area:void 0,products:[],order_total_price:0,order_total_profit:0,order_total_revenue:0,resaler:void 0,note:void 0,date:void 0,manual_discount:0},paymentCompany:[{id:1,title:\"上海毗邻星（需要发票，仅限对公转账）\",paymentChannel:[{id:1,title:\"对公转账\"}]},{id:2,title:\"上海毛星球（不要发票，可对公转账或支付宝）\",paymentChannel:[{id:1,title:\"对公转账\"},{id:2,title:\"支付宝\"}]}],pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:\"今天\",onClick:function(t){t.$emit(\"pick\",new Date)}},{text:\"昨天\",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit(\"pick\",e)}},{text:\"一周前\",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit(\"pick\",e)}}]},marketingOrderTemp:{id:void 0,department:void 0,client_name:void 0,shipping_address:void 0,contact:void 0,products:[],note:void 0,date:void 0},departments:[{id:1,name:\"运营部\"},{id:2,name:\"市场部\"},{id:3,name:\"销售部\"},{id:4,name:\"设计部\"},{id:5,name:\"产品部\"}]}},computed:Object(s.a)({},Object(a.b)([\"id\",\"role\",\"name\"])),created:function(){this.getInReivewSalesCount(),this.getInReivewMarketingOrderCount(),this.getProductTypes(),this.getRegions(),this.getAllInventorys(),this.temp.date=new Date,this.marketingOrderTemp.date=new Date},methods:{canCreateSalesOrder:function(){return 1===this.role||2===this.role||4===this.role||5===this.role||6===this.role||7===this.role},canCreateMarketingOrder:function(){return 1===this.role||2===this.role||4===this.role||5===this.role||6===this.role||7===this.role||8===this.role||9===this.role||10===this.role},handleSetLineChartData:function(t){this.$emit(\"handleSetLineChartData\",t)},goToSalesInReviewPage:function(){this.$router.push({path:\"sales/in-review-sales-order\"})},goToMarketingOrderInReviewPage:function(){this.$router.push({path:\"sales/in-review-marketing-order\"})},getInReivewSalesCount:function(){var t=this;d.a.getAllInReviewSalesCount(this.listQuery).then(function(e){t.inReivewSalesCount=e.total})},getInReivewMarketingOrderCount:function(){var t=this;_.a.getMarketingOrderInReviewCount().then(function(e){t.inReivewMarketingOrderCount=e.total})},getAllInventorys:function(){var t=this;h.a.fetchAllInventorys({page:1,limit:9999}).then(function(e){t.inventories=e.data}).catch(function(t){})},handleCreateSalesOrder:function(){var t=this;this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()})},handleCreateMarketingOrder:function(){var t=this;this.marketingOrderDialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()})},getProductTypes:function(){var t=this;p.a.getAllProductType().then(function(e){t.productTypes=e})},getSubType:function(t){this.selectedProducts=[],this.listQuery.product=void 0,this.listQuery.product_sub_type=void 0,this.productSubTypes=t.product_type.sub_type,t&&(t.product_sub_type=void 0,t.product_id=void 0,t.cost=void 0,t.size=void 0,t.quantity=0,t.promotion_quantity=0,t.in_storage_quantity=void 0,t.total_price=0)},getSelectedProducts:function(t){var e=this;this.selectedProducts=[],this.listQuery.product=void 0,t&&p.a.getProductBySubType({product_sub_type:t}).then(function(t){e.selectedProducts=t})},getProductBySubType:function(t,e){this.products=t.products,e&&(e.product_id=void 0,e.cost=void 0,e.size=void 0,e.quantity=0,e.promotion_quantity=0,e.in_storage_quantity=void 0,e.total_price=0,e.discount_rate=void 0)},getRegions:function(){var t=this;m.a.getAllResalerRegions(this.listQuery).then(function(e){t.resalerRegions=e}).catch(function(t){})},clearResalerRegion:function(){this.temp.region=void 0,this.temp.area=void 0,this.temp.resaler=void 0,this.resalerRegions=[],this.resalerAreas=[],this.resalers=[]},getAreas:function(){var t=this;this.temp.area=void 0,this.temp.resaler=void 0,this.resalerAreas=[],this.resalers=[],m.a.getAllResalerAreas({page:1,limit:1e4,region_id:this.temp.region.id}).then(function(e){t.resalerAreas=e}).catch(function(t){})},clearResalerArea:function(){this.temp.area=void 0,this.temp.resaler=void 0,this.resalerAreas=[],this.resalers=[]},getResalers:function(){var t=this;this.temp.resaler=void 0,this.resalers=[],m.a.getAllResalers({area_id:this.temp.area.id}).then(function(e){t.resalers=e})},clearResaler:function(){this.temp.resaler=void 0,this.resalers=[]},addMoreProduct:function(){this.temp.products.push({product_type:void 0,product_sub_type:void 0,product_id:\"\",quantity:0,promotion_quantity:0,cost:void 0,price:void 0,discount_rate:void 0,note:void 0,key:this.temp.products.length+1,total_price:0})},addMoreMarketingOrderProduct:function(){this.marketingOrderTemp.products.push({product_type:void 0,product_sub_type:void 0,product_id:\"\",quantity:0,cost:void 0,note:void 0,key:this.marketingOrderTemp.products.length+1})},removeProduct:function(t){this.$delete(this.temp.products,t),this.calculateOrderPrice()},addAllProductBySubType:function(t){var e=this,n=0;1===t?n=4:2===t?n=8:3===t?n=5:4===t?n=16:5===t?n=17:6===t&&(n=18),p.a.getAllProductsBySubType(n).then(function(t){t.sub_type[0].products.forEach(function(n){var i={product_type:t,product_sub_type:t.sub_type[0],product_id:n.id,product:n,quantity:1,promotion_quantity:0,cost:n.cost,price:n.price,discount_rate:n.resaler_discount,note:void 0,key:e.temp.products.length+1,total_price:0,in_storage_quantity:n.in_storage_quantity};e.calculateTotalPrice(i),e.temp.products.push(i)}),e.calculateOrderPrice()}).catch(function(t){e.$message({message:\"作弊工具出问题了，请联系徐神检查\",type:\"error\"})})},readProductInfo:function(t){this.products.forEach(function(e){e.id===t.product.id&&(t.product_id=e.id,t.size=e.size,t.cost=e.cost,t.price=e.price,t.discount_rate=e.resaler_discount,t.in_storage_quantity=e.in_storage_quantity)})},calculateTotalPrice:function(t){t.total_price=Object(f.f)(Object(f.f)(t.price*parseFloat(t.discount_rate))*t.quantity),t.total_cost=Object(f.f)(t.cost*(parseFloat(t.quantity)+parseFloat(t.promotion_quantity))),t.total_profit=Object(f.f)(t.total_price-t.total_cost),this.calculateOrderPrice()},calculateOrderPrice:function(){var t=0,e=0;this.temp.products.forEach(function(n){t+=n.total_price,e+=n.total_cost}),this.temp.order_total_price=Object(f.f)(parseFloat(t)),this.temp.order_total_revenue=Object(f.f)(parseFloat(t)-parseFloat(this.temp.manual_discount)),this.temp.order_total_profit=Object(f.f)(parseFloat(this.temp.order_total_price)-parseFloat(e))},dismissAddOrderDialog:function(){this.dialogFormVisible=!1,this.marketingOrderDialogFormVisible=!1,this.$refs.fileInput.value=null,this.setDataBackToDefault()},addSalesOrder:function(){var t=this;this.$confirm(\"确定添加?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){t.sendAddSalesRequest()}).catch(function(t){})},sendAddSalesRequest:function(){var t=this,e=this;if(this.temp.resaler)if(0===this.temp.products.length)this.$message({message:\"至少要有一个或以上的产品入库\",type:\"error\"});else if(this.temp.payment_channel)if(this.temp.payment_company){var n=!1;if(this.temp.products.forEach(function(t){parseFloat(t.quantity)+parseFloat(t.promotion_quantity)===0&&(n=!0)}),n)this.$message({message:\"有一款或多款产品出库总数为0，请仔细检查\",type:\"error\"});else{var i={sales_data:{manual_discount:this.temp.manual_discount,order_total_price:this.temp.order_total_price?this.temp.order_total_price:0,order_total_profit:this.temp.order_total_profit?this.temp.order_total_profit:0,order_total_revenue:this.temp.order_total_revenue?this.temp.order_total_revenue:0,resaler_id:this.temp.resaler?this.temp.resaler.id:null,area_manager_atm:this.temp.area.manager_id,region_manager_atm:this.temp.region.manager_id,added_by:this.id,date:y()(this.temp.date).format(\"YYYY-MM-DD\"),note:this.temp.note,payment_channel_id:this.temp.payment_channel.id,payment_company_id:this.temp.payment_company.id},product_data:[]};this.temp.products.forEach(function(t){var e={product_id:t.product_id,quantity:t.quantity,promotion_quantity:t.promotion_quantity,per_item_cost_atm:t.cost,per_item_price_atm:t.price,per_product_discount_ratio:t.discount_rate,total_price:t.total_price,total_cost:t.total_cost,total_profit:t.total_profit,note:t.note};i.product_data.push(e)}),this.listLoading=!0,d.a.addNewResalerSalesRequest(i).then(function(e){t.listLoading=!1,t.$alert(\"下单成功\",\"成功\",{confirmButtonText:\"确定\",callback:function(e){t.dialogFormVisible=!1,t.getInReivewSalesCount(),t.setDataBackToDefault()}})}).catch(function(n){e.$message({message:\"下单失败，请联系徐神检查\",type:\"error\"}),t.listLoading=!1})}}else this.$message({message:\"支付公司必须选择\",type:\"error\"});else this.$message({message:\"支付渠道必须选择\",type:\"error\"});else this.$message({message:\"请选择具体销售渠道\",type:\"error\"})},sendAddMarketingOrderRequest:function(){var t=this,e=this;if(this.marketingOrderTemp.client_name)if(this.marketingOrderTemp.shipping_address)if(this.marketingOrderTemp.contact)if(this.marketingOrderTemp.department){var n=!1;if(this.marketingOrderTemp.products.forEach(function(t){parseFloat(t.quantity)+parseFloat(t.promotion_quantity)===0&&(n=!0)}),n)this.$message({message:\"有一款或多款产品出库总数为0，请仔细检查\",type:\"error\"});else{var i={marketing_order_data:{department:this.marketingOrderTemp.department.name,client_name:this.marketingOrderTemp.client_name,shipping_address:this.marketingOrderTemp.shipping_address,contact:this.marketingOrderTemp.contact,added_by:this.id,date:y()(this.marketingOrderTemp.date).format(\"YYYY-MM-DD\"),note:this.marketingOrderTemp.note},product_data:[]};this.marketingOrderTemp.products.forEach(function(t){var e={product_id:t.product_id,quantity:t.quantity,per_item_cost_atm:t.cost,note:t.note};i.product_data.push(e)}),this.listLoading=!0,_.a.addMarketingOrder(i).then(function(e){t.listLoading=!1,t.$alert(\"下单成功\",\"成功\",{confirmButtonText:\"确定\",callback:function(e){t.marketingOrderDialogFormVisible=!1,t.getInReivewMarketingOrderCount(),t.setDataBackToDefault()}})}).catch(function(n){e.$message({message:\"下单失败，请联系徐神检查\",type:\"error\"}),t.listLoading=!1})}}else this.$message({message:\"请填写具体申请部门\",type:\"error\"});else this.$message({message:\"请填写具体的联系方式\",type:\"error\"});else this.$message({message:\"请填写具体的收货地址\",type:\"error\"});else this.$message({message:\"请填写具体客户姓名\",type:\"error\"})},addMarketingOrder:function(){var t=this;this.$confirm(\"确定添加这个订单?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){\"1\"===t.uploadType?t.sendAddMarketingOrderRequest():t.sendBulkInputDataRequest()}).catch(function(t){})},setDataBackToDefault:function(){this.temp={id:void 0,region:void 0,area:void 0,products:[],order_total_price:0,order_total_profit:0,order_total_revenue:0,resaler:void 0,note:void 0,manual_discount:0,date:new Date},this.marketingOrderTemp={id:void 0,department:void 0,client_name:void 0,shipping_address:void 0,contact:void 0,products:[],note:void 0,date:new Date},this.bulkInputData=[]},onReadExcelFileChange:function(t){var e=this,n=t.target.files?t.target.files[0]:null;this.bulkInputData=[];var i=[];Object(l.a)(n).then(function(t){i=[];for(var n=1;n<t.length;n++){var a=t[n],r={id:a[0],name:a[1],address:a[2],contact:a[3],product_name:a[6].substring(0,a[6].indexOf(\"__\")),product_id:a[6].substring(a[6].indexOf(\"__\")+2),quantity:a[7],note:a[8]};i.push(r)}0===i.length?e.$alert(\"读取文件失败或文件为空\",\"失败\",{confirmButtonText:\"确定\"}):(e.bulkInputData=i,e.calculateRowSpan(),e.$alert(\"文件读取成功，数据已经导入。请检查后提交\",\"成功\",{confirmButtonText:\"确定\"}))})},clearExcelFileInput:function(){this.$refs.fileInput.value=null,this.bulkInputData=[]},sendBulkInputDataRequest:function(){var t=this;if(this.marketingOrderTemp.department){var e=!1;if(this.bulkInputData.forEach(function(t){0===parseFloat(t.quantity)&&(e=!0)}),e)this.$message({message:\"有一条或多条产品数量为0，请仔细检查\",type:\"error\"});else{var n=[];this.bulkInputData.forEach(function(e){var i=!1,a=null;n.forEach(function(t){e.contact===t.marketing_order_data.contact&&(i=!0,a=t)});var r={product_id:e.product_id,quantity:e.quantity,note:e.note};i?a.product_data.push(r):(a={marketing_order_data:{department:t.marketingOrderTemp.department.name,client_name:e.name,shipping_address:e.address,contact:e.contact,added_by:t.id},product_data:[r]},n.push(a))}),this.listLoading=!0,_.a.addBulkMarketingOrder(n).then(function(e){t.listLoading=!1,t.$alert(\"下单成功\",\"成功\",{confirmButtonText:\"确定\",callback:function(e){t.marketingOrderDialogFormVisible=!1,t.$refs.fileInput.value=null,t.getInReivewMarketingOrderCount(),t.setDataBackToDefault()}})}).catch(function(e){that.$message({message:\"下单失败，请联系徐神检查\",type:\"error\"}),t.listLoading=!1})}}else this.$message({message:\"请填写具体申请部门\",type:\"error\"})},calculateRowSpan:function(){var t=[],e=0;this.bulkInputData.forEach(function(n){var i=!1;if(t.forEach(function(t){t.id===n.id&&(i=!0,t.end++,t.rowSpan++,e=t.start+t.rowSpan)}),!i){var a={id:n.id,start:e,end:e+1,rowSpan:1};e++,t.push(a)}}),this.rowSpans=t},objectSpanMethod:function(t){t.row,t.column;var e=t.rowIndex;if(t.columnIndex<3){var n={rowspan:0,colspan:0};return this.rowSpans.forEach(function(t){e>=t.start&&e<t.end&&(e-t.start)%t.rowSpan==0&&(n={rowspan:t.rowSpan,colspan:1})}),n}}}},b=(n(\"XxQY\"),n(\"KHd+\")),k=Object(b.a)(g,o,[],!1,null,\"48c369af\",null);k.options.__file=\"src/views/dashboard/admin/components/PanelGroup.vue\";var x=k.exports,w=function(){var t=this.$createElement;return(this._self._c||t)(\"div\",{class:this.className,style:{height:this.height,width:this.width}})};w._withStripped=!0;var S=n(\"MT78\"),C=n.n(S),T={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){var t=this;this.$_resizeHandler=Object(f.b)(function(){t.chart&&t.chart.resize()},100),this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_initResizeEvent:function(){window.addEventListener(\"resize\",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener(\"resize\",this.$_resizeHandler)},$_sidebarResizeHandler:function(t){\"width\"===t.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName(\"sidebar-container\")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener(\"transitionend\",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener(\"transitionend\",this.$_sidebarResizeHandler)}}};n(\"gX0l\");var O={mixins:[T],props:{className:{type:String,default:\"chart\"},width:{type:String,default:\"100%\"},height:{type:String,default:\"350px\"},autoResize:{type:Boolean,default:!0},chartData:{type:Object,required:!0}},data:function(){return{chart:null}},watch:{chartData:{deep:!0,handler:function(t){this.setOptions(t)}}},mounted:function(){var t=this;this.$nextTick(function(){t.initChart()})},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=C.a.init(this.$el,\"macarons\"),this.setOptions(this.chartData)},setOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.expectedData,n=t.actualData;this.chart.setOption({xAxis:{data:[\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\",\"Sun\"],boundaryGap:!1,axisTick:{show:!1}},grid:{left:10,right:10,bottom:20,top:30,containLabel:!0},tooltip:{trigger:\"axis\",axisPointer:{type:\"cross\"},padding:[5,10]},yAxis:{axisTick:{show:!1}},legend:{data:[\"expected\",\"actual\"]},series:[{name:\"expected\",itemStyle:{normal:{color:\"#FF005A\",lineStyle:{color:\"#FF005A\",width:2}}},smooth:!0,type:\"line\",data:e,animationDuration:2800,animationEasing:\"cubicInOut\"},{name:\"actual\",smooth:!0,type:\"line\",itemStyle:{normal:{color:\"#3888fa\",lineStyle:{color:\"#3888fa\",width:2},areaStyle:{color:\"#f3f8ff\"}}},data:n,animationDuration:2800,animationEasing:\"quadraticOut\"}]})}}},$=Object(b.a)(O,w,[],!1,null,null,null);$.options.__file=\"src/views/dashboard/admin/components/LineChart.vue\";var P=$.exports,R=function(){var t=this.$createElement;return(this._self._c||t)(\"div\",{class:this.className,style:{height:this.height,width:this.width}})};R._withStripped=!0,n(\"gX0l\");var D={mixins:[T],props:{className:{type:String,default:\"chart\"},width:{type:String,default:\"100%\"},height:{type:String,default:\"300px\"}},data:function(){return{chart:null}},mounted:function(){var t=this;this.$nextTick(function(){t.initChart()})},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=C.a.init(this.$el,\"macarons\"),this.chart.setOption({tooltip:{trigger:\"axis\",axisPointer:{type:\"shadow\"}},radar:{radius:\"66%\",center:[\"50%\",\"42%\"],splitNumber:8,splitArea:{areaStyle:{color:\"rgba(127,95,132,.3)\",opacity:1,shadowBlur:45,shadowColor:\"rgba(0,0,0,.5)\",shadowOffsetX:0,shadowOffsetY:15}},indicator:[{name:\"Sales\",max:1e4},{name:\"Administration\",max:2e4},{name:\"Information Techology\",max:2e4},{name:\"Customer Support\",max:2e4},{name:\"Development\",max:2e4},{name:\"Marketing\",max:2e4}]},legend:{left:\"center\",bottom:\"10\",data:[\"Allocated Budget\",\"Expected Spending\",\"Actual Spending\"]},series:[{type:\"radar\",symbolSize:0,areaStyle:{normal:{shadowBlur:13,shadowColor:\"rgba(0,0,0,.2)\",shadowOffsetX:0,shadowOffsetY:10,opacity:1}},data:[{value:[5e3,7e3,12e3,11e3,15e3,14e3],name:\"Allocated Budget\"},{value:[4e3,9e3,15e3,15e3,13e3,11e3],name:\"Expected Spending\"},{value:[5500,11e3,12e3,15e3,12e3,12e3],name:\"Actual Spending\"}],animationDuration:3e3}]})}}},A=Object(b.a)(D,R,[],!1,null,null,null);A.options.__file=\"src/views/dashboard/admin/components/RaddarChart.vue\";var q=A.exports,E=function(){var t=this.$createElement;return(this._self._c||t)(\"div\",{class:this.className,style:{height:this.height,width:this.width}})};E._withStripped=!0,n(\"gX0l\");var M={mixins:[T],props:{className:{type:String,default:\"chart\"},width:{type:String,default:\"100%\"},height:{type:String,default:\"300px\"}},data:function(){return{chart:null}},mounted:function(){var t=this;this.$nextTick(function(){t.initChart()})},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=C.a.init(this.$el,\"macarons\"),this.chart.setOption({tooltip:{trigger:\"item\",formatter:\"{a} <br/>{b} : {c} ({d}%)\"},legend:{left:\"center\",bottom:\"10\",data:[\"Industries\",\"Technology\",\"Forex\",\"Gold\",\"Forecasts\"]},series:[{name:\"WEEKLY WRITE ARTICLES\",type:\"pie\",roseType:\"radius\",radius:[15,95],center:[\"50%\",\"38%\"],data:[{value:320,name:\"Industries\"},{value:240,name:\"Technology\"},{value:149,name:\"Forex\"},{value:100,name:\"Gold\"},{value:59,name:\"Forecasts\"}],animationEasing:\"cubicInOut\",animationDuration:2600}]})}}},I=Object(b.a)(M,E,[],!1,null,null,null);I.options.__file=\"src/views/dashboard/admin/components/PieChart.vue\";var F=I.exports,B=function(){var t=this.$createElement;return(this._self._c||t)(\"div\",{class:this.className,style:{height:this.height,width:this.width}})};B._withStripped=!0,n(\"gX0l\");var L={mixins:[T],props:{className:{type:String,default:\"chart\"},width:{type:String,default:\"100%\"},height:{type:String,default:\"300px\"}},data:function(){return{chart:null}},mounted:function(){var t=this;this.$nextTick(function(){t.initChart()})},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=C.a.init(this.$el,\"macarons\"),this.chart.setOption({tooltip:{trigger:\"axis\",axisPointer:{type:\"shadow\"}},grid:{top:10,left:\"2%\",right:\"2%\",bottom:\"3%\",containLabel:!0},xAxis:[{type:\"category\",data:[\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\",\"Sun\"],axisTick:{alignWithLabel:!0}}],yAxis:[{type:\"value\",axisTick:{show:!1}}],series:[{name:\"pageA\",type:\"bar\",stack:\"vistors\",barWidth:\"60%\",data:[79,52,200,334,390,330,220],animationDuration:6e3},{name:\"pageB\",type:\"bar\",stack:\"vistors\",barWidth:\"60%\",data:[80,52,200,334,390,330,220],animationDuration:6e3},{name:\"pageC\",type:\"bar\",stack:\"vistors\",barWidth:\"60%\",data:[30,52,200,334,390,330,220],animationDuration:6e3}]})}}},z=Object(b.a)(L,B,[],!1,null,null,null);z.options.__file=\"src/views/dashboard/admin/components/BarChart.vue\";var j={newVisitis:{expectedData:[100,120,161,134,105,160,165],actualData:[120,82,91,154,162,140,145]},messages:{expectedData:[200,192,120,144,160,130,140],actualData:[180,160,151,106,145,150,130]},purchases:{expectedData:[80,100,121,104,105,90,100],actualData:[120,90,100,138,142,130,130]},shoppings:{expectedData:[130,140,141,142,145,150,160],actualData:[120,82,91,154,162,140,130]}},V={name:\"DashboardAdmin\",components:{PanelGroup:x,LineChart:P,RaddarChart:q,PieChart:F,BarChart:z.exports},data:function(){return{lineChartData:j.newVisitis}},methods:{handleSetLineChartData:function(t){this.lineChartData=j[t]}}},N=(n(\"TuCM\"),Object(b.a)(V,r,[],!1,null,\"a361ec26\",null));N.options.__file=\"src/views/dashboard/admin/index.vue\";var Y={name:\"Dashboard\",components:{adminDashboard:N.exports},data:function(){return{}},computed:{},created:function(){}},X=Object(b.a)(Y,i,[],!1,null,null,null);X.options.__file=\"src/views/dashboard/index.vue\";e.default=X.exports},xMja:function(t,e,n){\"use strict\";var i=n(\"DyJX\");e.a={addProduct:function(t){return new Promise(function(e,n){i.a.post(\"product/add\",t).then(function(t){return e(t)}).catch(function(t){return n(t)})})},getAllProducts:function(t){return new Promise(function(e,n){i.a.post(\"product/get_all_products\",t).then(function(t){return e(t)}).catch(function(t){return n(t)})})},getAllProductCount:function(t){return new Promise(function(e,n){i.a.post(\"product/get_all_products_count\",t).then(function(t){return e(t)}).catch(function(t){return n(t)})})},getAllProductsBySubType:function(t){return new Promise(function(e,n){i.a.post(\"product/get_all_products_by_sub_type\",{sub_type:t}).then(function(t){return e(t)}).catch(function(t){return n(t)})})},getAllProductType:function(){return new Promise(function(t,e){i.a.post(\"product/get_all_product_type\").then(function(e){return t(e)}).catch(function(t){return e(t)})})},getAllProductTypeCount:function(){return new Promise(function(t,e){i.a.post(\"product/get_all_product_type_count\").then(function(e){return t(e)}).catch(function(t){return e(t)})})},getProductSubType:function(t){return new Promise(function(e,n){i.a.post(\"product/get_product_sub_type\",t).then(function(t){return e(t)}).catch(function(t){return n(t)})})},getAllProductSubType:function(t){return new Promise(function(e,n){i.a.post(\"product/get_all_product_sub_type\",t).then(function(t){return e(t)}).catch(function(t){return n(t)})})},getAllProductSubTypeCount:function(){return new Promise(function(t,e){i.a.post(\"product/get_product_sub_type_count\").then(function(e){return t(e)}).catch(function(t){return e(t)})})},getProductBySubType:function(t){return new Promise(function(e,n){i.a.post(\"product/get_product_by_sub_type\",t).then(function(t){return e(t)}).catch(function(t){return n(t)})})},addProductType:function(t){return new Promise(function(e,n){i.a.post(\"product/add_product_type\",t).then(function(t){return e(t)}).catch(function(t){return n(t)})})},addProductSubType:function(t){return new Promise(function(e,n){i.a.post(\"product/add_product_sub_type\",t).then(function(t){return e(t)}).catch(function(t){return n(t)})})}}}}]);","extractedComments":[]}