{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{\"6AVv\":function(t,e,i){},S4mp:function(t,e,i){\"use strict\";var n=i(\"DyJX\");e.a={getAllResalers:function(t){return new Promise(function(e,i){n.a.post(\"resaler/get_all\",t).then(function(t){return e(t)}).catch(function(t){return i(t)})})},getResalersCount:function(){return new Promise(function(t,e){n.a.post(\"resaler/get_count\").then(function(e){return t(e)}).catch(function(t){return e(t)})})},addResaler:function(t){return new Promise(function(e,i){n.a.post(\"resaler/add\",t).then(function(t){return e(t)}).catch(function(t){return i(t)})})},deleteResaler:function(t){return new Promise(function(e,i){var a={id:t};n.a.post(\"resaler/delete\",a).then(function(t){return e(t)}).catch(function(t){return i(t)})})},getAllResalerRegions:function(t){return new Promise(function(e,i){n.a.post(\"resaler/get_all_regions\",t).then(function(t){return e(t)}).catch(function(t){return i(t)})})},getResalerRegionsCount:function(){return new Promise(function(t,e){n.a.post(\"resaler/get_region_count\").then(function(e){return t(e)}).catch(function(t){return e(t)})})},addResalerRegion:function(t){return new Promise(function(e,i){n.a.post(\"resaler/add_region\",t).then(function(t){return e(t)}).catch(function(t){return i(t)})})},addResalerRegionManager:function(t){return new Promise(function(e,i){n.a.post(\"resaler/add_region_manager\",t).then(function(t){return e(t)}).catch(function(t){return i(t)})})},removeResalerRegionManager:function(t){return new Promise(function(e,i){n.a.post(\"resaler/remove_region_manager\",t).then(function(t){return e(t)}).catch(function(t){return i(t)})})},getAllResalerAreas:function(t){return new Promise(function(e,i){n.a.post(\"resaler/get_all_areas\",t).then(function(t){return e(t)}).catch(function(t){return i(t)})})},getResalerAreasCount:function(){return new Promise(function(t,e){n.a.post(\"resaler/get_area_count\").then(function(e){return t(e)}).catch(function(t){return e(t)})})},addResalerArea:function(t){return new Promise(function(e,i){n.a.post(\"resaler/add_area\",t).then(function(t){return e(t)}).catch(function(t){return i(t)})})},addResalerAreaManager:function(t){return new Promise(function(e,i){n.a.post(\"resaler/add_area_manager\",t).then(function(t){return e(t)}).catch(function(t){return i(t)})})},removeResalerAreaManager:function(t){return new Promise(function(e,i){n.a.post(\"resaler/remove_area_manager\",t).then(function(t){return e(t)}).catch(function(t){return i(t)})})},getResalerTypes:function(){return new Promise(function(t,e){n.a.post(\"resaler/get_all_types\").then(function(e){return t(e)}).catch(function(t){return e(t)})})}}},TuCM:function(t,e,i){\"use strict\";var n=i(\"WdqM\");i.n(n).a},WdqM:function(t,e,i){},XxQY:function(t,e,i){\"use strict\";var n=i(\"6AVv\");i.n(n).a},lAbF:function(t,e,i){\"use strict\";i.r(e);var n=function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"dashboard-container\"},[e(\"adminDashboard\")],1)};n._withStripped=!0;var a=i(\"L2JU\"),r=function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"dashboard-editor-container\"},[e(\"panel-group\",{on:{handleSetLineChartData:this.handleSetLineChartData}})],1)};r._withStripped=!0;var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",[t._v(\"\\n`  \"),i(\"el-row\",{staticClass:\"panel-group\",attrs:{gutter:40}},[i(\"el-col\",{staticClass:\"card-panel-col\",attrs:{xs:12,sm:12,lg:4}},[i(\"div\",{staticClass:\"card-panel\",on:{click:function(e){return t.handleSetLineChartData(\"newVisitis\")}}},[i(\"div\",{staticClass:\"card-panel-text\"},[t._v(\" 当前月份 \")]),t._v(\" \"),i(\"div\",{staticClass:\"card-panel-num\"},[t._v(t._s(t.moment().format(\"YYYY-MM\")))])])]),t._v(\" \"),i(\"el-col\",{staticClass:\"card-panel-col\",attrs:{xs:12,sm:12,lg:4}},[i(\"div\",{staticClass:\"card-panel\",on:{click:function(e){return t.handleSetLineChartData(\"shoppings\")}}},[i(\"div\",{staticClass:\"card-panel-text\"},[t._v(\" 本月销售目标 \")]),t._v(\" \"),i(\"div\",{staticClass:\"card-panel-num\"},[i(\"count-to\",{staticClass:\"card-panel-num\",attrs:{\"start-val\":0,\"end-val\":0,duration:3600}})],1)])]),t._v(\" \"),i(\"el-col\",{staticClass:\"card-panel-col\",attrs:{xs:12,sm:12,lg:4}},[i(\"div\",{staticClass:\"card-panel\",on:{click:function(e){return t.handleSetLineChartData(\"messages\")}}},[i(\"div\",{staticClass:\"card-panel-text\"},[t._v(\" 本月总销量 \")]),t._v(\" \"),i(\"div\",{staticClass:\"card-panel-num\"},[i(\"count-to\",{staticClass:\"card-panel-num\",attrs:{\"start-val\":0,\"end-val\":0,duration:3e3}})],1)])]),t._v(\" \"),i(\"el-col\",{staticClass:\"card-panel-col\",attrs:{xs:12,sm:12,lg:6}},[i(\"div\",{staticClass:\"card-panel\",on:{click:function(e){return t.handleSetLineChartData(\"purchases\")}}},[i(\"div\",{staticClass:\"card-panel-text\"},[t._v(\" 新建订单 (尚未开通) \")]),t._v(\" \"),i(\"div\",{staticClass:\"card-panel-button\"},[i(\"el-button\",{attrs:{type:\"primary\",plain:\"\"},on:{click:t.handleCreate}},[t._v(\"新建分销订单\")])],1)])]),t._v(\" \"),i(\"el-col\",{staticClass:\"card-panel-col\",attrs:{xs:12,sm:12,lg:4}},[i(\"div\",{staticClass:\"card-panel\",on:{click:function(e){return t.goToSalesInReviewPage(\"shoppings\")}}},[i(\"div\",{staticClass:\"card-panel-text\"},[t._v(\" 尚未审核的订单 \")]),t._v(\" \"),i(\"div\",{staticClass:\"card-panel-num\"},[i(\"count-to\",{staticClass:\"card-panel-num\",attrs:{\"start-val\":0,\"end-val\":this.inReivewSalesCount,duration:1200}})],1)])])],1),t._v(\" \"),i(\"el-dialog\",{attrs:{title:\"添加新销售\",visible:t.dialogFormVisible,width:\"80%\"},on:{\"update:visible\":function(e){t.dialogFormVisible=e}}},[i(\"el-form\",{ref:\"dataForm\",staticStyle:{\"margin-left\":\"20px\"},attrs:{model:t.temp,\"label-position\":\"left\",\"label-width\":\"10px\"}},[i(\"div\",{staticStyle:{display:\"inline-block\"}},[i(\"div\",{staticStyle:{display:\"inline-block\",\"margin-bottom\":\"40px\"}},[i(\"h3\",{staticStyle:{display:\"inline-block\"}},[t._v(\" 分销大区 \")]),t._v(\" \"),i(\"el-form-item\",{staticStyle:{display:\"inline-block\",\"margin-left\":\"10px\"},attrs:{prop:\"type\"}},[i(\"el-select\",{attrs:{\"value-key\":\"id\",placeholder:\"选择分销大区\"},on:{change:function(e){return t.getAreas()},clear:function(e){return t.getAreas()}},model:{value:t.temp.region,callback:function(e){t.$set(t.temp,\"region\",e)},expression:\"temp.region\"}},t._l(t.resalerRegions,function(t){return i(\"el-option\",{key:t.id,attrs:{label:t.title,value:t}})}),1)],1),t._v(\" \"),i(\"div\",[t._v(\" 大区经理： \"+t._s(t.temp.region?t.temp.region.manager_name:\"\")+\" \")])],1),t._v(\" \"),i(\"div\",{staticStyle:{display:\"inline-block\",\"margin-left\":\"15px\"}},[i(\"h3\",{staticStyle:{display:\"inline-block\"}},[t._v(\" 分销地区 \")]),t._v(\" \"),i(\"el-form-item\",{staticStyle:{display:\"inline-block\",\"margin-left\":\"10px\"},attrs:{prop:\"type\"}},[i(\"el-select\",{attrs:{\"value-key\":\"id\",placeholder:\"选择分销地区\"},on:{change:function(e){return t.getResalers()},clear:function(e){return t.clearResaler()}},model:{value:t.temp.area,callback:function(e){t.$set(t.temp,\"area\",e)},expression:\"temp.area\"}},t._l(t.resalerAreas,function(t){return i(\"el-option\",{key:t.id,attrs:{label:t.title,value:t}})}),1)],1),t._v(\" \"),i(\"div\",[t._v(\" 地区经理： \"+t._s(t.temp.area?t.temp.area.area_manager_name:\"\")+\" \")])],1),t._v(\" \"),i(\"div\",{staticStyle:{display:\"inline-block\",\"margin-left\":\"15px\"}},[i(\"h3\",{staticStyle:{display:\"inline-block\"}},[t._v(\" 分销渠道 \")]),t._v(\" \"),i(\"el-form-item\",{staticStyle:{display:\"inline-block\"},attrs:{prop:\"type\"}},[i(\"el-select\",{attrs:{\"value-key\":\"id\",placeholder:\"选择分销渠道\"},model:{value:t.temp.resaler,callback:function(e){t.$set(t.temp,\"resaler\",e)},expression:\"temp.resaler\"}},t._l(t.resalers,function(t){return i(\"el-option\",{key:t.id,attrs:{label:t.name,value:t}})}),1)],1),t._v(\" \"),i(\"div\",[t._v(\" 联系人： \"+t._s(t.temp.resaler?t.temp.resaler.contact+\" \"+t.temp.resaler.phone:\"\")+\" \")])],1)]),t._v(\" \"),i(\"div\",[i(\"h3\",{staticStyle:{display:\"inline-block\",width:\"100px\",\"vertical-align\":\"top\",\"margin-top\":\"0\"}},[t._v(\" 添加销售产品 \")]),t._v(\" \"),i(\"div\",{staticStyle:{\"margin-bottom\":\"20px\"}},[t._v(\" \\n          作弊工具：\\n          \"),i(\"el-button\",{attrs:{type:\"info\"},on:{click:function(e){return t.addAllProductBySubType(1)}}},[t._v(\"\\n            添加小冻干套装\\n          \")]),t._v(\" \"),i(\"el-button\",{attrs:{type:\"info\"},on:{click:function(e){return t.addAllProductBySubType(2)}}},[t._v(\"\\n            添加大冻干套装\\n          \")]),t._v(\" \"),i(\"el-button\",{attrs:{type:\"info\"},on:{click:function(e){return t.addAllProductBySubType(3)}}},[t._v(\"\\n            添加肉干套装\\n          \")]),t._v(\" \"),i(\"el-button\",{attrs:{type:\"info\"},on:{click:function(e){return t.addAllProductBySubType(4)}}},[t._v(\"\\n            添加狗鲜粮套装\\n          \")]),t._v(\" \"),i(\"el-button\",{attrs:{type:\"info\"},on:{click:function(e){return t.addAllProductBySubType(5)}}},[t._v(\"\\n            添加猫鲜粮套装\\n          \")]),t._v(\" \"),i(\"el-button\",{attrs:{type:\"info\"},on:{click:function(e){return t.addAllProductBySubType(5)}}},[t._v(\"\\n            添加猫条套装\\n          \")])],1),t._v(\" \"),i(\"div\",{staticStyle:{display:\"inline-block\"}},[i(\"div\",{staticStyle:{\"margin-bottom\":\"5px\"}},[i(\"div\",{staticClass:\"input-title input-title-extra-long\"},[t._v(\"产品类型\")]),t._v(\" \"),i(\"div\",{staticClass:\"input-title input-title-extra-long\"},[t._v(\"产品分类\")]),t._v(\" \"),i(\"div\",{staticClass:\"input-title input-title-extra-long\"},[t._v(\"产品名称\")]),t._v(\" \"),i(\"div\",{staticClass:\"input-title input-title-short\"},[t._v(\"零售价\")]),t._v(\" \"),i(\"div\",{staticClass:\"input-title input-title-short\"},[t._v(\"数量\")]),t._v(\" \"),i(\"div\",{staticClass:\"input-title input-title\"},[t._v(\"产品折扣\")]),t._v(\" \"),i(\"div\",{staticClass:\"input-title input-title-extra-long\"},[t._v(\"总价\")]),t._v(\" \"),i(\"div\",{staticClass:\"input-title input-title-extra-long\"},[t._v(\"备注\")])]),t._v(\" \"),t._l(t.temp.products,function(e,n){return i(\"el-form-item\",{key:e.id,staticStyle:{\"margin-bottom\":\"10px\"},attrs:{label:\"\",prop:\"product\"}},[i(\"el-select\",{staticClass:\"filter-item\",staticStyle:{width:\"150px\"},attrs:{\"value-key\":\"id\",placeholder:\"产品类型\",clearable:\"\"},on:{change:function(i){return t.getSubType(e)},clear:function(i){return t.getSubType(e)}},model:{value:e.product_type,callback:function(i){t.$set(e,\"product_type\",i)},expression:\"p.product_type\"}},t._l(t.productTypes,function(t){return i(\"el-option\",{key:t.id,attrs:{label:t.title,value:t}})}),1),t._v(\" \"),t.temp.products[n].product_type?i(\"el-select\",{staticClass:\"filter-item inventory-in-input-extra\",attrs:{\"value-key\":\"id\",placeholder:\"产品分类\",clearable:\"\"},on:{change:function(i){return t.getProductBySubType(e.product_sub_type,e)},clear:function(i){return t.getProductBySubType(e.product_sub_type,e)}},model:{value:e.product_sub_type,callback:function(i){t.$set(e,\"product_sub_type\",i)},expression:\"p.product_sub_type\"}},t._l(t.temp.products[n].product_type.sub_type,function(t){return i(\"el-option\",{key:t.id,attrs:{label:t.title,value:t}})}),1):t._e(),t._v(\" \"),t.temp.products[n].product_sub_type?i(\"el-select\",{staticClass:\"filter-item inventory-in-input-extra\",attrs:{\"value-key\":\"id\",placeholder:\"产品名称\",clearable:\"\"},on:{change:function(i){return t.readProductInfo(e)},clear:function(i){return t.readProductInfo(e)}},model:{value:e.product,callback:function(i){t.$set(e,\"product\",i)},expression:\"p.product\"}},t._l(t.temp.products[n].product_sub_type.products,function(t){return i(\"el-option\",{key:t.id,attrs:{label:t.title,value:t}})}),1):t._e(),t._v(\" \"),i(\"el-input\",{staticClass:\"filter-item inventory-in-input-short\",attrs:{placeholder:\"零售价\",disabled:!0},model:{value:e.price,callback:function(i){t.$set(e,\"price\",i)},expression:\"p.price\"}}),t._v(\" \"),i(\"el-input\",{staticClass:\"filter-item inventory-in-input-short\",attrs:{placeholder:\"数量\",clearable:\"\"},on:{change:function(i){return t.calculateTotalPrice(e)}},model:{value:e.quantity,callback:function(i){t.$set(e,\"quantity\",i)},expression:\"p.quantity\"}}),t._v(\" \"),i(\"el-input\",{staticClass:\"filter-item inventory-in-input\",attrs:{placeholder:\"折扣率\",clearable:\"\"},on:{change:function(i){return t.calculateTotalPrice(e)}},model:{value:e.discount_rate,callback:function(i){t.$set(e,\"discount_rate\",i)},expression:\"p.discount_rate\"}}),t._v(\" \"),i(\"el-input\",{staticClass:\"filter-item inventory-in-input-extra\",attrs:{placeholder:\"总价\",clearable:\"\",disabled:!0},model:{value:e.total_price,callback:function(i){t.$set(e,\"total_price\",i)},expression:\"p.total_price\"}}),t._v(\" \"),i(\"el-input\",{staticClass:\"filter-item inventory-in-input-extra\",attrs:{placeholder:\"备注\",clearable:\"\"},model:{value:e.note,callback:function(i){t.$set(e,\"note\",i)},expression:\"p.note\"}}),t._v(\" \"),i(\"el-button\",{staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"danger\",icon:\"el-icon-delete\"},on:{click:function(e){return t.removeProduct(n)}}})],1)}),t._v(\" \"),i(\"el-form-item\",[i(\"el-button\",{staticStyle:{width:\"150px\"},attrs:{type:\"primary\",plain:\"\"},on:{click:t.addMoreProduct}},[t._v(\"添加产品\")]),t._v(\" \"),i(\"div\",[t._v(\" 产品折扣为0-1，例如：9折，则填写0.9\")])],1)],2),t._v(\" \"),i(\"div\",{staticStyle:{width:\"150px\",\"margin-bottom\":\"20px\"}},[i(\"h3\",{staticClass:\"middle-title\"},[t._v(\" 订单人工改价 \")]),t._v(\" \"),i(\"el-input\",{staticClass:\"filter-item\",attrs:{placeholder:\"人工改价\",clearable:\"\"},on:{change:function(e){return t.calculateOrderPrice()}},model:{value:t.temp.manual_discount,callback:function(e){t.$set(t.temp,\"manual_discount\",e)},expression:\"temp.manual_discount\"}})],1),t._v(\" \"),i(\"div\",{staticStyle:{\"margin-bottom\":\"20px\"}},[i(\"h3\",{staticClass:\"section-title\"},[t._v(\" 汇总信息 \")]),t._v(\" \"),i(\"div\",{staticStyle:{display:\"inline-block\",width:\"150px\"}},[i(\"h3\",{staticClass:\"middle-title\"},[t._v(\" 订单总价 \")]),t._v(\" \"),i(\"el-input\",{staticClass:\"filter-item\",attrs:{placeholder:\"订单总价\",clearable:\"\",disabled:!0},model:{value:t.temp.order_total_price,callback:function(e){t.$set(t.temp,\"order_total_price\",e)},expression:\"temp.order_total_price\"}})],1),t._v(\" \"),i(\"div\",{staticStyle:{\"margin-left\":\"10px\",display:\"inline-block\",width:\"150px\"}},[i(\"h3\",{staticClass:\"middle-title\"},[t._v(\" 订单总利润 \")]),t._v(\" \"),i(\"el-input\",{staticClass:\"filter-item\",attrs:{placeholder:\"订单总利润\",clearable:\"\",disabled:!0},model:{value:t.temp.order_total_profit,callback:function(e){t.$set(t.temp,\"order_total_profit\",e)},expression:\"temp.order_total_profit\"}})],1)]),t._v(\" \"),i(\"div\",{staticStyle:{\"margin-bottom\":\"20px\"}},[i(\"h3\",{staticClass:\"section-title\"},[t._v(\" 订单日期 \")]),t._v(\" \"),i(\"el-date-picker\",{attrs:{align:\"right\",type:\"date\",placeholder:\"选择日期\",\"picker-options\":t.pickerOptions},model:{value:t.temp.date,callback:function(e){t.$set(t.temp,\"date\",e)},expression:\"temp.date\"}})],1),t._v(\" \"),i(\"div\",[i(\"h3\",{staticClass:\"section-title\"},[t._v(\" 备注 \")]),t._v(\" \"),i(\"el-input\",{staticStyle:{width:\"70%\"},attrs:{type:\"textarea\",autosize:{minRows:2,maxRows:4},placeholder:\"备注\"},model:{value:t.temp.note,callback:function(e){t.$set(t.temp,\"note\",e)},expression:\"temp.note\"}})],1)])]),t._v(\" \"),i(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(\"\\n        取消\\n      \")]),t._v(\" \"),i(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(e){return t.addSalesOrder()}}},[t._v(\"\\n        提交新的销售订单\\n      \")])],1)],1)],1)};o._withStripped=!0;i(\"rGqo\");var s=i(\"23J+\"),c=i(\"vYYK\"),l=i(\"7BsA\"),u=i.n(l),d=i(\"xUCC\"),p=i(\"xMja\"),h=i(\"S4mp\"),f=i(\"7Qib\"),_=i(\"wd/R\"),m=i.n(_),v={components:{CountTo:u.a},data:function(){return{inReivewSalesCount:0,listQuery:{page:1,limit:10},productTypes:[],productSubTypes:[],selectedProducts:[],products:[],resalerRegions:[],resalerAreas:[],resalers:[],dialogFormVisible:!1,temp:{id:void 0,region:void 0,area:void 0,products:[Object(c.a)({product_type:void 0,product_sub_type:void 0,product_id:\"\",quantity:0,cost:void 0,price:void 0,discount_rate:void 0,note:void 0,key:1,total_price:0},\"note\",void 0)],order_total_price:0,order_total_profit:0,resaler:void 0,note:void 0,date:void 0,manual_discount:0},pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:\"今天\",onClick:function(t){t.$emit(\"pick\",new Date)}},{text:\"昨天\",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit(\"pick\",e)}},{text:\"一周前\",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit(\"pick\",e)}}]}}},computed:Object(s.a)({},Object(a.b)([\"id\"])),created:function(){this.getInReivewSalesCount(),this.getProductTypes(),this.getRegions(),this.temp.date=new Date},methods:{handleSetLineChartData:function(t){this.$emit(\"handleSetLineChartData\",t)},goToSalesInReviewPage:function(){this.$router.push({path:\"sales/in-review-sales-order\"})},getInReivewSalesCount:function(){var t=this;d.a.getAllInReviewSalesCount(this.listQuery).then(function(e){t.inReivewSalesCount=e.total})},handleCreate:function(){var t=this;this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()})},getProductTypes:function(){var t=this;p.a.getAllProductType().then(function(e){t.productTypes=e})},getSubType:function(t){this.selectedProducts=[],this.listQuery.product=void 0,this.listQuery.product_sub_type=void 0,this.productSubTypes=t.product_type.sub_type,t&&(t.product_sub_type=void 0,t.product_id=void 0,t.cost=void 0,t.size=void 0,t.quantity=0,t.total_price=0)},getSelectedProducts:function(t){var e=this;this.selectedProducts=[],this.listQuery.product=void 0,t&&p.a.getProductBySubType({product_sub_type:t}).then(function(t){e.selectedProducts=t})},getProductBySubType:function(t,e){this.products=t.products,e&&(e.product_id=void 0,e.cost=void 0,e.size=void 0,e.quantity=0,e.total_price=0,e.discount_rate=void 0)},getRegions:function(){var t=this;h.a.getAllResalerRegions(this.listQuery).then(function(e){t.resalerRegions=e}).catch(function(t){})},clearResalerRegion:function(){this.temp.region=void 0,this.temp.area=void 0,this.temp.resaler=void 0,this.resalerRegions=[],this.resalerAreas=[],this.resalers=[]},getAreas:function(){var t=this;this.temp.area=void 0,this.temp.resaler=void 0,this.resalerAreas=[],this.resalers=[],h.a.getAllResalerAreas({page:1,limit:1e4,region_id:this.temp.region.id}).then(function(e){t.resalerAreas=e}).catch(function(t){})},clearResalerArea:function(){this.temp.area=void 0,this.temp.resaler=void 0,this.resalerAreas=[],this.resalers=[]},getResalers:function(){var t=this;this.temp.resaler=void 0,this.resalers=[],h.a.getAllResalers({area_id:this.temp.area.id}).then(function(e){t.resalers=e})},clearResaler:function(){this.temp.resaler=void 0,this.resalers=[]},addMoreProduct:function(){this.temp.products.push({product_type:void 0,product_sub_type:void 0,product_id:\"\",quantity:void 0,cost:void 0,price:void 0,discount_rate:void 0,note:void 0,key:this.temp.products.length+1,total_price:0})},removeProduct:function(t){this.$delete(this.temp.products,t),this.calculateOrderPrice()},addAllProductBySubType:function(t){var e=this,i=0;1===t?i=4:2===t?i=8:3===t?i=5:4===t?i=16:5===t?i=17:6===t&&(i=4),p.a.getAllProductsBySubType(i).then(function(i){i.sub_type[0].products.forEach(function(n){if(6!==t||6===t&&19!=n.id){var a={product_type:i,product_sub_type:i.sub_type[0],product_id:n.id,product:n,quantity:1,cost:n.cost,price:n.price,discount_rate:n.resaler_discount,note:void 0,key:e.temp.products.length+1,total_price:0};e.calculateTotalPrice(a),e.temp.products.push(a)}}),e.calculateOrderPrice()}).catch(function(t){e.$message({message:\"作弊工具出问题了，请联系徐神检查\",type:\"error\"})})},readProductInfo:function(t){this.products.forEach(function(e){e.id===t.product.id&&(t.product_id=e.id,t.size=e.size,t.cost=e.cost,t.price=e.price,t.discount_rate=e.resaler_discount)})},calculateTotalPrice:function(t){t.total_price=Object(f.f)(t.price*parseFloat(t.discount_rate)*t.quantity),t.total_cost=Object(f.f)(t.cost*t.quantity),t.total_profit=Object(f.f)(t.total_price-t.total_cost),this.calculateOrderPrice()},calculateOrderPrice:function(){var t=0,e=0;this.temp.products.forEach(function(i){t+=i.total_price,e+=i.total_cost}),this.temp.order_total_price=Object(f.f)(parseFloat(t)-parseFloat(this.temp.manual_discount)),this.temp.order_total_profit=Object(f.f)(parseFloat(this.temp.order_total_price)-parseFloat(e))},addSalesOrder:function(){var t=this;this.$confirm(\"确定添加?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){t.sendAddSalesRequest()}).catch(function(t){})},sendAddSalesRequest:function(){var t=this,e=this;if(0===this.temp.products.length)this.$message({message:\"至少要有一个或以上的产品入库\",type:\"error\"});else{var i={sales_data:{manual_discount:this.temp.manual_discount,order_total_price:this.temp.order_total_price?this.temp.order_total_price:0,order_total_profit:this.temp.order_total_profit?this.temp.order_total_profit:0,resaler_id:this.temp.resaler?this.temp.resaler.id:null,area_manager_atm:this.temp.area.manager_id,region_manager_atm:this.temp.region.manager_id,added_by:this.id,date:m()(this.temp.date).format(\"YYYY-MM-DD\"),note:this.temp.note},product_data:[]};this.temp.products.forEach(function(t){var e={product_id:t.product_id,quantity:t.quantity,per_item_cost_atm:t.cost,per_item_price_atm:t.price,per_product_discount_ratio:t.discount_rate,total_price:t.total_price,total_cost:t.total_cost,total_profit:t.total_profit,note:t.note};i.product_data.push(e)}),this.listLoading=!0,d.a.addNewResalerSalesRequest(i).then(function(i){e.listLoading=!1,t.$alert(\"下单成功\",\"成功\",{confirmButtonText:\"确定\",callback:function(e){t.dialogFormVisible=!1,t.getInReivewSalesCount()}})}).catch(function(t){e.$message({message:\"下单失败，请联系徐神检查\",type:\"error\"}),e.listLoading=!1})}}}},y=(i(\"XxQY\"),i(\"KHd+\")),g=Object(y.a)(v,o,[],!1,null,\"48c369af\",null);g.options.__file=\"src/views/dashboard/admin/components/PanelGroup.vue\";var b=g.exports,x=function(){var t=this.$createElement;return(this._self._c||t)(\"div\",{class:this.className,style:{height:this.height,width:this.width}})};x._withStripped=!0;var S=i(\"MT78\"),w=i.n(S),C={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){var t=this;this.$_resizeHandler=Object(f.b)(function(){t.chart&&t.chart.resize()},100),this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_initResizeEvent:function(){window.addEventListener(\"resize\",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener(\"resize\",this.$_resizeHandler)},$_sidebarResizeHandler:function(t){\"width\"===t.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName(\"sidebar-container\")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener(\"transitionend\",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener(\"transitionend\",this.$_sidebarResizeHandler)}}};i(\"gX0l\");var k={mixins:[C],props:{className:{type:String,default:\"chart\"},width:{type:String,default:\"100%\"},height:{type:String,default:\"350px\"},autoResize:{type:Boolean,default:!0},chartData:{type:Object,required:!0}},data:function(){return{chart:null}},watch:{chartData:{deep:!0,handler:function(t){this.setOptions(t)}}},mounted:function(){var t=this;this.$nextTick(function(){t.initChart()})},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=w.a.init(this.$el,\"macarons\"),this.setOptions(this.chartData)},setOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.expectedData,i=t.actualData;this.chart.setOption({xAxis:{data:[\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\",\"Sun\"],boundaryGap:!1,axisTick:{show:!1}},grid:{left:10,right:10,bottom:20,top:30,containLabel:!0},tooltip:{trigger:\"axis\",axisPointer:{type:\"cross\"},padding:[5,10]},yAxis:{axisTick:{show:!1}},legend:{data:[\"expected\",\"actual\"]},series:[{name:\"expected\",itemStyle:{normal:{color:\"#FF005A\",lineStyle:{color:\"#FF005A\",width:2}}},smooth:!0,type:\"line\",data:e,animationDuration:2800,animationEasing:\"cubicInOut\"},{name:\"actual\",smooth:!0,type:\"line\",itemStyle:{normal:{color:\"#3888fa\",lineStyle:{color:\"#3888fa\",width:2},areaStyle:{color:\"#f3f8ff\"}}},data:i,animationDuration:2800,animationEasing:\"quadraticOut\"}]})}}},P=Object(y.a)(k,x,[],!1,null,null,null);P.options.__file=\"src/views/dashboard/admin/components/LineChart.vue\";var R=P.exports,T=function(){var t=this.$createElement;return(this._self._c||t)(\"div\",{class:this.className,style:{height:this.height,width:this.width}})};T._withStripped=!0,i(\"gX0l\");var $={mixins:[C],props:{className:{type:String,default:\"chart\"},width:{type:String,default:\"100%\"},height:{type:String,default:\"300px\"}},data:function(){return{chart:null}},mounted:function(){var t=this;this.$nextTick(function(){t.initChart()})},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=w.a.init(this.$el,\"macarons\"),this.chart.setOption({tooltip:{trigger:\"axis\",axisPointer:{type:\"shadow\"}},radar:{radius:\"66%\",center:[\"50%\",\"42%\"],splitNumber:8,splitArea:{areaStyle:{color:\"rgba(127,95,132,.3)\",opacity:1,shadowBlur:45,shadowColor:\"rgba(0,0,0,.5)\",shadowOffsetX:0,shadowOffsetY:15}},indicator:[{name:\"Sales\",max:1e4},{name:\"Administration\",max:2e4},{name:\"Information Techology\",max:2e4},{name:\"Customer Support\",max:2e4},{name:\"Development\",max:2e4},{name:\"Marketing\",max:2e4}]},legend:{left:\"center\",bottom:\"10\",data:[\"Allocated Budget\",\"Expected Spending\",\"Actual Spending\"]},series:[{type:\"radar\",symbolSize:0,areaStyle:{normal:{shadowBlur:13,shadowColor:\"rgba(0,0,0,.2)\",shadowOffsetX:0,shadowOffsetY:10,opacity:1}},data:[{value:[5e3,7e3,12e3,11e3,15e3,14e3],name:\"Allocated Budget\"},{value:[4e3,9e3,15e3,15e3,13e3,11e3],name:\"Expected Spending\"},{value:[5500,11e3,12e3,15e3,12e3,12e3],name:\"Actual Spending\"}],animationDuration:3e3}]})}}},A=Object(y.a)($,T,[],!1,null,null,null);A.options.__file=\"src/views/dashboard/admin/components/RaddarChart.vue\";var D=A.exports,E=function(){var t=this.$createElement;return(this._self._c||t)(\"div\",{class:this.className,style:{height:this.height,width:this.width}})};E._withStripped=!0,i(\"gX0l\");var O={mixins:[C],props:{className:{type:String,default:\"chart\"},width:{type:String,default:\"100%\"},height:{type:String,default:\"300px\"}},data:function(){return{chart:null}},mounted:function(){var t=this;this.$nextTick(function(){t.initChart()})},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=w.a.init(this.$el,\"macarons\"),this.chart.setOption({tooltip:{trigger:\"item\",formatter:\"{a} <br/>{b} : {c} ({d}%)\"},legend:{left:\"center\",bottom:\"10\",data:[\"Industries\",\"Technology\",\"Forex\",\"Gold\",\"Forecasts\"]},series:[{name:\"WEEKLY WRITE ARTICLES\",type:\"pie\",roseType:\"radius\",radius:[15,95],center:[\"50%\",\"38%\"],data:[{value:320,name:\"Industries\"},{value:240,name:\"Technology\"},{value:149,name:\"Forex\"},{value:100,name:\"Gold\"},{value:59,name:\"Forecasts\"}],animationEasing:\"cubicInOut\",animationDuration:2600}]})}}},z=Object(y.a)(O,E,[],!1,null,null,null);z.options.__file=\"src/views/dashboard/admin/components/PieChart.vue\";var B=z.exports,F=function(){var t=this.$createElement;return(this._self._c||t)(\"div\",{class:this.className,style:{height:this.height,width:this.width}})};F._withStripped=!0,i(\"gX0l\");var L={mixins:[C],props:{className:{type:String,default:\"chart\"},width:{type:String,default:\"100%\"},height:{type:String,default:\"300px\"}},data:function(){return{chart:null}},mounted:function(){var t=this;this.$nextTick(function(){t.initChart()})},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=w.a.init(this.$el,\"macarons\"),this.chart.setOption({tooltip:{trigger:\"axis\",axisPointer:{type:\"shadow\"}},grid:{top:10,left:\"2%\",right:\"2%\",bottom:\"3%\",containLabel:!0},xAxis:[{type:\"category\",data:[\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\",\"Sun\"],axisTick:{alignWithLabel:!0}}],yAxis:[{type:\"value\",axisTick:{show:!1}}],series:[{name:\"pageA\",type:\"bar\",stack:\"vistors\",barWidth:\"60%\",data:[79,52,200,334,390,330,220],animationDuration:6e3},{name:\"pageB\",type:\"bar\",stack:\"vistors\",barWidth:\"60%\",data:[80,52,200,334,390,330,220],animationDuration:6e3},{name:\"pageC\",type:\"bar\",stack:\"vistors\",barWidth:\"60%\",data:[30,52,200,334,390,330,220],animationDuration:6e3}]})}}},q=Object(y.a)(L,F,[],!1,null,null,null);q.options.__file=\"src/views/dashboard/admin/components/BarChart.vue\";var M={newVisitis:{expectedData:[100,120,161,134,105,160,165],actualData:[120,82,91,154,162,140,145]},messages:{expectedData:[200,192,120,144,160,130,140],actualData:[180,160,151,106,145,150,130]},purchases:{expectedData:[80,100,121,104,105,90,100],actualData:[120,90,100,138,142,130,130]},shoppings:{expectedData:[130,140,141,142,145,150,160],actualData:[120,82,91,154,162,140,130]}},j={name:\"DashboardAdmin\",components:{PanelGroup:b,LineChart:R,RaddarChart:D,PieChart:B,BarChart:q.exports},data:function(){return{lineChartData:M.newVisitis}},methods:{handleSetLineChartData:function(t){this.lineChartData=M[t]}}},I=(i(\"TuCM\"),Object(y.a)(j,r,[],!1,null,\"a361ec26\",null));I.options.__file=\"src/views/dashboard/admin/index.vue\";var Y={name:\"Dashboard\",components:{adminDashboard:I.exports},data:function(){return{}},computed:{},created:function(){}},N=Object(y.a)(Y,n,[],!1,null,null,null);N.options.__file=\"src/views/dashboard/index.vue\";e.default=N.exports},xMja:function(t,e,i){\"use strict\";var n=i(\"DyJX\");e.a={addProduct:function(t){return new Promise(function(e,i){n.a.post(\"product/add\",t).then(function(t){return e(t)}).catch(function(t){return i(t)})})},getAllProducts:function(t){return new Promise(function(e,i){n.a.post(\"product/get_all_products\",t).then(function(t){return e(t)}).catch(function(t){return i(t)})})},getAllProductCount:function(t){return new Promise(function(e,i){n.a.post(\"product/get_all_products_count\",t).then(function(t){return e(t)}).catch(function(t){return i(t)})})},getAllProductsBySubType:function(t){return new Promise(function(e,i){n.a.post(\"product/get_all_products_by_sub_type\",{sub_type:t}).then(function(t){return e(t)}).catch(function(t){return i(t)})})},getAllProductType:function(){return new Promise(function(t,e){n.a.post(\"product/get_all_product_type\").then(function(e){return t(e)}).catch(function(t){return e(t)})})},getAllProductTypeCount:function(){return new Promise(function(t,e){n.a.post(\"product/get_all_product_type_count\").then(function(e){return t(e)}).catch(function(t){return e(t)})})},getProductSubType:function(t){return new Promise(function(e,i){n.a.post(\"product/get_product_sub_type\",t).then(function(t){return e(t)}).catch(function(t){return i(t)})})},getAllProductSubType:function(t){return new Promise(function(e,i){n.a.post(\"product/get_all_product_sub_type\",t).then(function(t){return e(t)}).catch(function(t){return i(t)})})},getAllProductSubTypeCount:function(){return new Promise(function(t,e){n.a.post(\"product/get_product_sub_type_count\").then(function(e){return t(e)}).catch(function(t){return e(t)})})},getProductBySubType:function(t){return new Promise(function(e,i){n.a.post(\"product/get_product_by_sub_type\",t).then(function(t){return e(t)}).catch(function(t){return i(t)})})},addProductType:function(t){return new Promise(function(e,i){n.a.post(\"product/add_product_type\",t).then(function(t){return e(t)}).catch(function(t){return i(t)})})},addProductSubType:function(t){return new Promise(function(e,i){n.a.post(\"product/add_product_sub_type\",t).then(function(t){return e(t)}).catch(function(t){return i(t)})})}}}}]);","extractedComments":[]}