{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{UzTp:function(t,e,i){\"use strict\";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"app-container\"},[i(\"div\",{staticClass:\"filter-container\"},[i(\"h2\",[t._v(\"筛选结果\")]),t._v(\" \"),i(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"150px\"},attrs:{placeholder:\"会员id\"},nativeOn:{keyup:function(e){return!e.type.indexOf(\"key\")&&t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?null:t.handleFilter(e)}},model:{value:t.listQuery.id,callback:function(e){t.$set(t.listQuery,\"id\",e)},expression:\"listQuery.id\"}}),t._v(\" \"),i(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"150px\",\"margin-left\":\"15px\"},attrs:{placeholder:\"手机号\"},nativeOn:{keyup:function(e){return!e.type.indexOf(\"key\")&&t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?null:t.handleFilter(e)}},model:{value:t.listQuery.cellphone,callback:function(e){t.$set(t.listQuery,\"cellphone\",e)},expression:\"listQuery.cellphone\"}}),t._v(\" \"),i(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"150px\",\"margin-left\":\"15px\"},attrs:{placeholder:\"所在城市\"},nativeOn:{keyup:function(e){return!e.type.indexOf(\"key\")&&t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?null:t.handleFilter(e)}},model:{value:t.listQuery.city,callback:function(e){t.$set(t.listQuery,\"city\",e)},expression:\"listQuery.city\"}}),t._v(\" \"),i(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"150px\",\"margin-left\":\"15px\"},attrs:{placeholder:\"姓名\"},nativeOn:{keyup:function(e){return!e.type.indexOf(\"key\")&&t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?null:t.handleFilter(e)}},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,\"name\",e)},expression:\"listQuery.name\"}}),t._v(\" \"),i(\"el-select\",{staticClass:\"filter-item\",staticStyle:{width:\"150px\",\"margin-left\":\"15px\"},attrs:{placeholder:\"宠物类型\",clearable:\"\"},model:{value:t.listQuery.pet_type,callback:function(e){t.$set(t.listQuery,\"pet_type\",e)},expression:\"listQuery.pet_type\"}},t._l(t.petTypes,function(t){return i(\"el-option\",{key:t.id,attrs:{label:t.title,value:t.id}})}),1),t._v(\" \"),i(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"150px\",\"margin-left\":\"15px\"},attrs:{placeholder:\"宠物品种\"},nativeOn:{keyup:function(e){return!e.type.indexOf(\"key\")&&t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?null:t.handleFilter(e)}},model:{value:t.listQuery.pet_sub_type,callback:function(e){t.$set(t.listQuery,\"pet_sub_type\",e)},expression:\"listQuery.pet_sub_type\"}}),t._v(\" \"),i(\"el-button\",{staticClass:\"filter-item\",staticStyle:{width:\"100px\",\"margin-left\":\"15px\"},attrs:{type:\"primary\",icon:\"el-icon-search\"},on:{click:t.handleFilter}},[t._v(\"\\n      搜索\\n    \")]),t._v(\" \"),i(\"el-button\",{staticClass:\"filter-item\",staticStyle:{width:\"200px\",\"margin-left\":\"10px\"},attrs:{type:\"success\",icon:\"el-icon-edit\"},on:{click:t.handleCreate}},[t._v(\"\\n      添加新会员\\n    \")])],1),t._v(\" \"),t._m(0),t._v(\" \"),i(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.listLoading,expression:\"listLoading\"}],key:t.tableKey,staticStyle:{width:\"100%\"},attrs:{data:t.members,\"span-method\":t.objectSpanMethod,border:\"\",fit:\"\",\"highlight-current-row\":\"\"}},[i(\"el-table-column\",{attrs:{label:\"会员ID\",prop:\"id\",width:\"100px\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){var a=e.row;return[i(\"span\",[t._v(t._s(a.id))])]}}])}),t._v(\" \"),i(\"el-table-column\",{attrs:{label:\"姓名\",prop:\"name\",width:\"250px\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){var a=e.row;return[i(\"span\",[t._v(t._s(a.name))])]}}])}),t._v(\" \"),i(\"el-table-column\",{attrs:{label:\"手机号码\",prop:\"cellphone\",width:\"200px\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){var a=e.row;return[i(\"span\",[t._v(t._s(a.cellphone))])]}}])}),t._v(\" \"),i(\"el-table-column\",{attrs:{label:\"微信账号\",prop:\"wechat_account\",width:\"200px\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){var a=e.row;return[i(\"span\",[t._v(t._s(a.wechat_account))])]}}])}),t._v(\" \"),i(\"el-table-column\",{attrs:{label:\"淘宝账号\",prop:\"taobao_account\",width:\"200px\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){var a=e.row;return[i(\"span\",[t._v(t._s(a.taobao_account))])]}}])}),t._v(\" \"),i(\"el-table-column\",{attrs:{label:\"支付宝账号\",prop:\"taobao_account\",width:\"200px\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){var a=e.row;return[i(\"span\",[t._v(t._s(a.alipay_account))])]}}])}),t._v(\" \"),i(\"el-table-column\",{attrs:{label:\"所在城市\",prop:\"city\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){var a=e.row;return[i(\"span\",[t._v(t._s(a.city))])]}}])}),t._v(\" \"),i(\"el-table-column\",{attrs:{label:\"总消费金额\",width:\"150px\",prop:\"total_spend\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){var a=e.row;return[i(\"span\",[t._v(t._s(a.total_spend))])]}}])}),t._v(\" \"),i(\"el-table-column\",{attrs:{label:\"宠物类别\",prop:\"pet_type\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){var a=e.row;return[i(\"span\",[t._v(t._s(null===a.type?\"\":1===a.type?\"狗\":\"猫\"))])]}}])}),t._v(\" \"),i(\"el-table-column\",{attrs:{label:\"宠物名字\",prop:\"pet_name\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){var a=e.row;return[i(\"span\",[t._v(t._s(a.pet_name))])]}}])}),t._v(\" \"),i(\"el-table-column\",{attrs:{label:\"宠物品种\",prop:\"pet_sub_type\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){var a=e.row;return[i(\"span\",[t._v(t._s(a.sub_type))])]}}])}),t._v(\" \"),i(\"el-table-column\",{attrs:{label:\"宠物性别\",prop:\"pet_gender\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){var a=e.row;return[i(\"span\",[t._v(t._s(null===a.pet_gender?\"\":1===a.pet_gender?\"boy\":\"girl\"))])]}}])}),t._v(\" \"),i(\"el-table-column\",{attrs:{label:\"宠物生日\",prop:\"birthday\",width:\"200px\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){var a=e.row;return[i(\"span\",[t._v(t._s(null===a.birthday?\"\":t.moment(a.birthday).format(\"YYYY-MM-DD\")))])]}}])}),t._v(\" \"),i(\"el-table-column\",{attrs:{label:\"操作\",width:\"300px\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){var a=e.row;return[i(\"el-button\",{attrs:{type:\"warning\",plain:\"\"},on:{click:function(e){return t.editMember(a)}}},[t._v(\"编辑\")]),t._v(\" \"),a.total_spend>0?i(\"el-button\",{attrs:{type:\"primary\",plain:\"\"},on:{click:function(e){return t.checkMemberDetail(a)}}},[t._v(\"消费详情\")]):t._e()]}}])})],1),t._v(\" \"),i(\"pagination\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.total>0,expression:\"total>0\"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{\"update:page\":function(e){return t.$set(t.listQuery,\"page\",e)},\"update:limit\":function(e){return t.$set(t.listQuery,\"limit\",e)},pagination:t.getMembers}}),t._v(\" \"),i(\"el-dialog\",{attrs:{title:\"添加新会员\",visible:t.dialogFormVisible,width:\"80%\"},on:{\"update:visible\":function(e){t.dialogFormVisible=e}}},[i(\"el-form\",{ref:\"dataForm\",staticStyle:{\"margin-left\":\"20px\"},attrs:{model:t.temp,\"label-position\":\"left\",\"label-width\":\"10px\"}},[i(\"div\",[1===t.formType?i(\"h3\",{staticStyle:{\"vertical-align\":\"top\",\"margin-top\":\"0\"}},[t._v(\" 添加新会员信息 \")]):t._e(),t._v(\" \"),2===t.formType?i(\"h3\",{staticStyle:{\"vertical-align\":\"top\",\"margin-top\":\"0\"}},[t._v(\" 编辑会员信息 \")]):t._e(),t._v(\" \"),i(\"div\",{staticStyle:{display:\"inline-block\"}},[i(\"div\",{staticStyle:{\"margin-bottom\":\"5px\"}},[i(\"div\",{staticClass:\"input-title\"},[t._v(\"客户姓名\")]),t._v(\" \"),i(\"div\",{staticClass:\"input-title\"},[t._v(\"手机号码\")]),t._v(\" \"),i(\"div\",{staticClass:\"input-title\"},[t._v(\"所在城市\")]),t._v(\" \"),i(\"div\",{staticClass:\"input-title\"},[t._v(\"姓名\")]),t._v(\" \"),i(\"div\",{staticClass:\"input-title\"},[t._v(\"微信账号\")]),t._v(\" \"),i(\"div\",{staticClass:\"input-title\"},[t._v(\"淘宝账号\")]),t._v(\" \"),i(\"div\",{staticClass:\"input-title\"},[t._v(\"支付宝账号\")])]),t._v(\" \"),i(\"el-form-item\",{staticStyle:{\"margin-bottom\":\"10px\"},attrs:{label:\"\",prop:\"event\"}},[i(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"150px\"},attrs:{placeholder:\"客户姓名\"},model:{value:t.temp.name,callback:function(e){t.$set(t.temp,\"name\",e)},expression:\"temp.name\"}}),t._v(\" \"),i(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"150px\",\"margin-left\":\"10px\"},attrs:{placeholder:\"手机号码\"},model:{value:t.temp.cellphone,callback:function(e){t.$set(t.temp,\"cellphone\",e)},expression:\"temp.cellphone\"}}),t._v(\" \"),i(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"150px\",\"margin-left\":\"10px\"},attrs:{placeholder:\"所在城市\"},model:{value:t.temp.city,callback:function(e){t.$set(t.temp,\"city\",e)},expression:\"temp.city\"}}),t._v(\" \"),i(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"150px\",\"margin-left\":\"10px\"},attrs:{placeholder:\"微信账号\"},model:{value:t.temp.wechat_account,callback:function(e){t.$set(t.temp,\"wechat_account\",e)},expression:\"temp.wechat_account\"}}),t._v(\" \"),i(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"150px\",\"margin-left\":\"10px\"},attrs:{placeholder:\"淘宝账号\"},model:{value:t.temp.taobao_account,callback:function(e){t.$set(t.temp,\"taobao_account\",e)},expression:\"temp.taobao_account\"}}),t._v(\" \"),i(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"150px\",\"margin-left\":\"10px\"},attrs:{placeholder:\"支付宝账号\"},model:{value:t.temp.alipay_account,callback:function(e){t.$set(t.temp,\"alipay_account\",e)},expression:\"temp.alipay_account\"}})],1)],1),t._v(\" \"),t.temp.currentPets&&t.temp.currentPets.length>0?i(\"div\",[i(\"h3\",{staticStyle:{display:\"block\",width:\"100px\",\"vertical-align\":\"top\",\"margin-top\":\"40\"}},[t._v(\" 当前宠物信息 \")]),t._v(\" \"),i(\"div\",{staticStyle:{display:\"inline-block\"}},[i(\"div\",{staticStyle:{\"margin-bottom\":\"5px\"}},[i(\"div\",{staticClass:\"input-title\"},[t._v(\"宠物ID\")]),t._v(\" \"),i(\"div\",{staticClass:\"input-title\"},[t._v(\"宠物类型\")]),t._v(\" \"),i(\"div\",{staticClass:\"input-title\"},[t._v(\"宠物名称\")]),t._v(\" \"),i(\"div\",{staticClass:\"input-title\"},[t._v(\"宠物品种\")]),t._v(\" \"),i(\"div\",{staticClass:\"input-title\"},[t._v(\"性别\")]),t._v(\" \"),i(\"div\",{staticClass:\"input-title\"},[t._v(\"生日\")])]),t._v(\" \"),t._l(t.temp.currentPets,function(e,a){return i(\"div\",{key:e.id,staticStyle:{\"margin-bottom\":\"10px\"},attrs:{label:\"\",prop:\"product\"}},[i(\"span\",{staticStyle:{display:\"inline-block\",width:\"150px\",\"margin-left\":\"10px\"}},[t._v(t._s(e.id))]),t._v(\" \"),i(\"span\",{staticStyle:{display:\"inline-block\",width:\"150px\",\"margin-left\":\"10px\"}},[t._v(t._s(1===e.type?\"狗\":\"猫\"))]),t._v(\" \"),i(\"span\",{staticStyle:{display:\"inline-block\",width:\"150px\",\"margin-left\":\"10px\"}},[t._v(t._s(e.name))]),t._v(\" \"),i(\"span\",{staticStyle:{display:\"inline-block\",width:\"150px\",\"margin-left\":\"10px\"}},[t._v(t._s(e.sub_type))]),t._v(\" \"),i(\"span\",{staticStyle:{display:\"inline-block\",width:\"150px\",\"margin-left\":\"10px\"}},[t._v(t._s(1===e.gender?\"公\":\"母\"))]),t._v(\" \"),i(\"span\",{staticStyle:{display:\"inline-block\",width:\"150px\",\"margin-left\":\"10px\"}},[t._v(t._s(t.moment(e.birthday).format(\"YYYY-MM-DD\")))]),t._v(\" \"),i(\"el-button\",{staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"danger\",icon:\"el-icon-delete\"},on:{click:function(i){return t.removePetFromEditing(e,a)}}})],1)})],2)]):t._e(),t._v(\" \"),i(\"div\",[i(\"h3\",{staticStyle:{display:\"block\",width:\"100px\",\"vertical-align\":\"top\",\"margin-top\":\"40\"}},[t._v(\" 宠物信息 \")]),t._v(\" \"),i(\"div\",{staticStyle:{display:\"inline-block\"}},[i(\"div\",{staticStyle:{\"margin-bottom\":\"5px\"}},[i(\"div\",{staticClass:\"input-title\"},[t._v(\"宠物类型\")]),t._v(\" \"),i(\"div\",{staticClass:\"input-title\"},[t._v(\"宠物名称\")]),t._v(\" \"),i(\"div\",{staticClass:\"input-title\"},[t._v(\"宠物品种\")]),t._v(\" \"),i(\"div\",{staticClass:\"input-title\"},[t._v(\"性别\")]),t._v(\" \"),i(\"div\",{staticClass:\"input-title\"},[t._v(\"生日\")])]),t._v(\" \"),t._l(t.temp.pets,function(e,a){return i(\"el-form-item\",{key:e.id,staticStyle:{\"margin-bottom\":\"10px\"},attrs:{label:\"\",prop:\"product\"}},[i(\"el-select\",{staticClass:\"filter-item\",staticStyle:{width:\"150px\"},attrs:{placeholder:\"宠物类型\",clearable:\"\"},model:{value:e.type,callback:function(i){t.$set(e,\"type\",i)},expression:\"item.type\"}},t._l(t.petTypes,function(t){return i(\"el-option\",{key:t.id,attrs:{label:t.title,value:t.id}})}),1),t._v(\" \"),i(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"150px\",\"margin-left\":\"10px\"},attrs:{placeholder:\"宠物名称\",clearable:\"\"},model:{value:e.name,callback:function(i){t.$set(e,\"name\",i)},expression:\"item.name\"}}),t._v(\" \"),i(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"150px\",\"margin-left\":\"10px\"},attrs:{placeholder:\"宠物品种\",clearable:\"\"},model:{value:e.sub_type,callback:function(i){t.$set(e,\"sub_type\",i)},expression:\"item.sub_type\"}}),t._v(\" \"),i(\"el-select\",{staticClass:\"filter-item inventory-in-input-extra\",attrs:{placeholder:\"宠物性别\",clearable:\"\"},model:{value:e.gender,callback:function(i){t.$set(e,\"gender\",i)},expression:\"item.gender\"}},t._l(t.petGenders,function(t){return i(\"el-option\",{key:t.id,attrs:{label:t.title,value:t.id}})}),1),t._v(\" \"),i(\"el-date-picker\",{staticStyle:{width:\"200px\"},attrs:{type:\"date\",placeholder:\"生日\"},model:{value:e.birthday,callback:function(i){t.$set(e,\"birthday\",i)},expression:\"item.birthday\"}}),t._v(\" \"),i(\"el-button\",{staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"danger\",icon:\"el-icon-delete\"},on:{click:function(e){return t.removePet(a)}}})],1)}),t._v(\" \"),i(\"el-form-item\",[i(\"el-button\",{staticStyle:{width:\"150px\"},attrs:{type:\"primary\",plain:\"\"},on:{click:t.addMorePet}},[t._v(\"添加宠物\")])],1)],2)]),t._v(\" \"),i(\"div\",[i(\"h3\",{staticClass:\"section-title\"},[t._v(\" 客户备注 \")]),t._v(\" \"),i(\"el-input\",{staticStyle:{width:\"70%\"},attrs:{type:\"textarea\",autosize:{minRows:2,maxRows:4},placeholder:\"备注\"},model:{value:t.temp.note,callback:function(e){t.$set(t.temp,\"note\",e)},expression:\"temp.note\"}})],1)])]),t._v(\" \"),i(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(\"\\n        取消\\n      \")]),t._v(\" \"),1===this.formType?i(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(e){return t.addNewMember()}}},[t._v(\"\\n        添加新会员\\n      \")]):t._e(),t._v(\" \"),2===this.formType?i(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(e){return t.updateMember()}}},[t._v(\"\\n        修改会员信息\\n      \")]):t._e()],1)],1)],1)};a._withStripped=!0;i(\"f3/d\"),i(\"rGqo\");var n=i(\"23J+\"),l=i(\"gZTm\"),s=(i(\"7Qib\"),i(\"Mz3J\")),o=i(\"L2JU\"),r=i(\"wd/R\"),c=i.n(r),p={name:\"ComplexTable\",components:{Pagination:s.a},filters:{},data:function(){return{tableKey:0,members:null,total:0,listLoading:!0,dialogFormVisible:!1,formType:1,rowSpans:null,listQuery:{page:1,limit:10},petTypes:[{id:1,title:\"狗\"},{id:2,title:\"猫\"}],petGenders:[{id:1,title:\"公\"},{id:2,title:\"母\"}],temp:{name:null,cellphone:null,wechat_account:null,taobao_account:null,alipay_account:null,city:null,notes:null,pets:[{name:void 0,type:void 0,sub_type:void 0,gender:void 0,birthday:void 0}]}}},created:function(){},computed:Object(n.a)({},Object(o.b)([\"id\"])),beforeRouteEnter:function(t,e,i){i(function(t){t.getMembers(),t.getCount(),i()})},methods:{calculateRowSpan:function(){var t=[],e=0;this.members.forEach(function(i){var a=!1;if(t.forEach(function(t){t.id===i.id&&(a=!0,t.end++,t.rowSpan++,e=t.start+t.rowSpan)}),!a){var n={id:i.id,start:e,end:e+1,rowSpan:1};e++,t.push(n)}}),this.rowSpans=t},getMembers:function(){var t=this;this.listLoading=!0,l.a.getAllMembers(this.listQuery).then(function(e){t.members=e,t.listLoading=!1,t.calculateRowSpan()}).catch(function(e){t.$message({message:\"读取库存失败，请联系徐神检查\",type:\"error\"}),t.listLoading=!1})},getCount:function(){var t=this;l.a.getMembersCount(this.listQuery).then(function(e){t.total=e.total})},handleCreate:function(){this.dialogFormVisible=!0,this.formType=1},removePet:function(t){this.$delete(this.temp.pets,t)},addNewMember:function(){var t=this;this.$confirm(\"确定添加?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){t.sendNewMemberRequest()}).catch(function(t){})},sendNewMemberRequest:function(){var t=this;if(this.temp.cellphone&&this.temp.name){this.listLoading=!0;var e={member_data:{name:this.temp.name,cellphone:this.temp.cellphone,wechat_account:this.temp.wechat_account,taobao_account:this.temp.taobao_account,alipay_account:this.temp.alipay_account,city:this.temp.city,note:this.temp.note},pets:[]};this.temp.pets.forEach(function(t){var i={name:t.name,type:t.type,sub_type:t.sub_type,gender:t.gender};t.birthday&&(i.birthday=c()(t.birthday).format(\"YYYY-MM-DD\")),e.pets.push(i)}),l.a.addMember(e).then(function(e){t.listLoading=!1,t.$alert(\"添加成功\",\"成功\",{confirmButtonText:\"确定\",callback:function(e){t.page=1,t.getMembers(),t.getCount(),t.dialogFormVisible=!1,t.temp={name:null,cellphone:null,wechat_account:null,taobao_account:null,alipay_account:null,note:null,pets:[]}}})}).catch(function(e){t.$message({message:\"添加失败，请联系徐神检查\",type:\"error\"}),t.listLoading=!1})}else this.$message({message:\"必须填写姓名电话\",type:\"error\"})},editMember:function(t){var e=this;this.dialogFormVisible=!0,this.formType=2,this.temp={id:t.id,name:t.name,cellphone:t.cellphone,city:t.city,wechat_account:t.wechat_account,taobao_account:t.taobao_account,alipay_account:t.alipay_account,note:t.note,currentPets:[],deletePets:[],pets:[]},this.members.forEach(function(i){i.id===t.id&&i.pet_id&&null!=i.pet_id&&e.temp.currentPets.push({id:i.pet_id,name:i.pet_name,type:i.type,sub_type:i.sub_type,gender:i.pet_gender,birthday:i.birthday})})},removePetFromEditing:function(t,e){this.$delete(this.temp.currentPets,e),this.temp.deletePets.push(t)},updateMember:function(){var t=this;this.$confirm(\"确定修改?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){t.sendUpdateMemberRequest()}).catch(function(t){})},sendUpdateMemberRequest:function(){var t=this;if(this.temp.cellphone&&this.temp.name){this.listLoading=!0;var e={member_data:{id:this.temp.id,name:this.temp.name,cellphone:this.temp.cellphone,wechat_account:this.temp.wechat_account,taobao_account:this.temp.taobao_account,alipay_account:this.temp.alipay_account,city:this.temp.city,note:this.temp.note},add_pets:[],delete_pets:this.temp.deletePets};this.temp.pets.forEach(function(t){var i={name:t.name,type:t.type,sub_type:t.sub_type,gender:t.gender};t.birthday&&(i.birthday=c()(t.birthday).format(\"YYYY-MM-DD\")),e.add_pets.push(i)}),l.a.updateMember(e).then(function(e){t.listLoading=!1,t.$alert(\"修改成功\",\"成功\",{confirmButtonText:\"确定\",callback:function(e){t.page=1,t.getMembers(),t.getCount(),t.dialogFormVisible=!1,t.temp={name:null,cellphone:null,wechat_account:null,taobao_account:null,alipay_account:null,note:null,pets:[],deletePets:[],currentPets:[]}}})}).catch(function(e){t.$message({message:\"添加失败，请联系徐神检查\",type:\"error\"}),t.listLoading=!1})}else this.$message({message:\"必须填写姓名电话\",type:\"error\"})},handleFilter:function(){this.listQuery.page=1,this.getMembers(),this.getCount()},checkMemberDetail:function(t){this.$router.push({name:\"member-sales-detail\",params:{id:t.id,member:t}})},addMorePet:function(){this.temp.pets.push({name:void 0,type:void 0,sub_type:void 0,gender:void 0,birthday:void 0})},objectSpanMethod:function(t){t.row,t.column;var e=t.rowIndex,i=t.columnIndex;if(i<=6||13===i){var a={rowspan:0,colspan:0};return this.rowSpans.forEach(function(t){e>=t.start&&e<t.end&&(e-t.start)%t.rowSpan==0&&(a={rowspan:t.rowSpan,colspan:1})}),a}}}},u=(i(\"zQmJ\"),i(\"KHd+\")),d=Object(u.a)(p,a,[function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",[e(\"h2\",{staticClass:\"title\"},[this._v(\"会员列表\")])])}],!1,null,\"5ebce4d4\",null);d.options.__file=\"src/views/member/member-list.vue\";e.default=d.exports},Z40b:function(t,e,i){},zQmJ:function(t,e,i){\"use strict\";var a=i(\"Z40b\");i.n(a).a}}]);","extractedComments":[]}