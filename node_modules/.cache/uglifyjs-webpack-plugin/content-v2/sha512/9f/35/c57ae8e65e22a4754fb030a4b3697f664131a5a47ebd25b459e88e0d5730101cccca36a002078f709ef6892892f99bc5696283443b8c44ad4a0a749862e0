{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{\"+Lc1\":function(e,t,n){\"use strict\";var r=n(\"DyJX\");t.a={getAllMarketingOrder:function(e){return new Promise(function(t,n){r.a.post(\"order/get_all\",e).then(function(e){return t(e)}).catch(function(e){return n(e)})})},getMarketingOrderCount:function(e){return new Promise(function(t,n){r.a.post(\"order/get_count\",e).then(function(e){return t(e)}).catch(function(e){return n(e)})})},getMarketingOrderInReviewCount:function(){return new Promise(function(e,t){r.a.post(\"order/get_in_review_count\").then(function(t){return e(t)}).catch(function(e){return t(e)})})},addMarketingOrder:function(e){return new Promise(function(t,n){r.a.post(\"order/add\",e).then(function(e){return t(e)}).catch(function(e){return n(e)})})},deleteMarketingOrder:function(e){return new Promise(function(t,n){var a={id:e};r.a.post(\"order/delete\",a).then(function(e){return t(e)}).catch(function(e){return n(e)})})},updateMarketingOrderDeliveryCode:function(e){return new Promise(function(t,n){r.a.post(\"order/update_delivery_code\",e).then(function(e){return t()}).catch(function(e){return n(e)})})},addBulkMarketingOrder:function(e){return new Promise(function(t,n){r.a.post(\"order/bulk_add\",e).then(function(e){return t(e)}).catch(function(e){return n(e)})})},updateBulkMarketingOrderDeliveryCode:function(e){return new Promise(function(t,n){r.a.post(\"order/bulk_deliver\",e).then(function(e){return t(e)}).catch(function(e){return n(e)})})}}},\"1zXc\":function(e,t,n){},\"8tky\":function(e,t,n){\"use strict\";(function(e){\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof window?window:void 0!==e||\"undefined\"!=typeof self&&self;var n,r=(function(e,t){e.exports=function e(t,n,r){var a,i,o=window,l=\"application/octet-stream\",s=r||l,c=t,u=!n&&!r&&c,d=document.createElement(\"a\"),p=function(e){return String(e)},f=o.Blob||o.MozBlob||o.WebKitBlob||p,h=n||\"download\";if(f=f.call?f.bind(o):Blob,\"true\"===String(this)&&(s=(c=[c,s])[0],c=c[1]),u&&u.length<2048&&(h=u.split(\"/\").pop().split(\"?\")[0],d.href=u,-1!==d.href.indexOf(u))){var v=new XMLHttpRequest;return v.open(\"GET\",u,!0),v.responseType=\"blob\",v.onload=function(t){e(t.target.response,h,l)},setTimeout(function(){v.send()},0),v}if(/^data:([\\w+-]+\\/[\\w+.-]+)?[,;]/.test(c)){if(!(c.length>2096103.424&&f!==p))return navigator.msSaveBlob?navigator.msSaveBlob(w(c),h):_(c);c=w(c),s=c.type||l}else if(/([\\x80-\\xff])/.test(c)){for(var m=0,g=new Uint8Array(c.length),y=g.length;m<y;++m)g[m]=c.charCodeAt(m);c=new f([g],{type:s})}function w(e){for(var t=e.split(/[:;,]/),n=t[1],r=\"base64\"==t[2]?atob:decodeURIComponent,a=r(t.pop()),i=a.length,o=0,l=new Uint8Array(i);o<i;++o)l[o]=a.charCodeAt(o);return new f([l],{type:n})}function _(e,t){if(\"download\"in d)return d.href=e,d.setAttribute(\"download\",h),d.className=\"download-js-link\",d.innerHTML=\"downloading...\",d.style.display=\"none\",document.body.appendChild(d),setTimeout(function(){d.click(),document.body.removeChild(d),!0===t&&setTimeout(function(){o.URL.revokeObjectURL(d.href)},250)},66),!0;if(/(Version)\\/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari\\//.test(navigator.userAgent))return/^data:/.test(e)&&(e=\"data:\"+e.replace(/^data:([\\w\\/\\-\\+]+)/,l)),window.open(e)||confirm(\"Displaying New Document\\n\\nUse Save As... to download, then click back to return to this page.\")&&(location.href=e),!0;var n=document.createElement(\"iframe\");document.body.appendChild(n),!t&&/^data:/.test(e)&&(e=\"data:\"+e.replace(/^data:([\\w\\/\\-\\+]+)/,l)),n.src=e,setTimeout(function(){document.body.removeChild(n)},333)}if(a=c instanceof f?c:new f([c],{type:s}),navigator.msSaveBlob)return navigator.msSaveBlob(a,h);if(o.URL)_(o.URL.createObjectURL(a),!0);else{if(\"string\"==typeof a||a.constructor===p)try{return _(\"data:\"+s+\";base64,\"+o.btoa(a))}catch(e){return _(\"data:\"+s+\",\"+encodeURIComponent(a))}(i=new FileReader).onload=function(e){_(this.result)},i.readAsDataURL(a)}return!0}}(n={exports:{}},n.exports),n.exports);var a=function(e,t,n,r,a,i,o,l,s,c){\"boolean\"!=typeof o&&(s=l,l=o,o=!1);var u,d=\"function\"==typeof n?n.options:n;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,a&&(d.functional=!0)),r&&(d._scopeId=r),i?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,s(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},d._ssrRegister=u):t&&(u=o?function(){t.call(this,c(this.$root.$options.shadowRoot))}:function(e){t.call(this,l(e))}),u)if(d.functional){var p=d.render;d.render=function(e,t){return u.call(t),p(e,t)}}else{var f=d.beforeCreate;d.beforeCreate=f?[].concat(f,u):[u]}return n};const i={props:{type:{type:String,default:\"xls\"},data:{type:Array,required:!1,default:null},fields:{type:Object,default:()=>null},exportFields:{type:Object,default:()=>null},defaultValue:{type:String,required:!1,default:\"\"},header:{default:null},footer:{default:null},name:{type:String,default:\"data.xls\"},fetch:{type:Function},meta:{type:Array,default:()=>[]},worksheet:{type:String,default:\"Sheet1\"},beforeGenerate:{type:Function},beforeFinish:{type:Function},escapeCsv:{type:Boolean,default:!0},stringifyLongNum:{type:Boolean,default:!1}},computed:{idName:()=>\"export_\"+(new Date).getTime(),downloadFields(){return this.fields?this.fields:this.exportFields?this.exportFields:void 0}},methods:{async generate(){\"function\"==typeof this.beforeGenerate&&await this.beforeGenerate();let e=this.data;if(\"function\"!=typeof this.fetch&&e||(e=await this.fetch()),!e||!e.length)return;let t=this.getProcessedJson(e,this.downloadFields);return\"html\"===this.type?this.export(this.jsonToXLS(t),this.name.replace(\".xls\",\".html\"),\"text/html\"):\"csv\"===this.type?this.export(this.jsonToCSV(t),this.name.replace(\".xls\",\".csv\"),\"application/csv\"):this.export(this.jsonToXLS(t),this.name,\"application/vnd.ms-excel\")},export:async function(e,t,n){let a=this.base64ToBlob(e,n);\"function\"==typeof this.beforeFinish&&await this.beforeFinish(),r(a,t,n)},jsonToXLS(e){let t=\"<thead>\";const n=Object.keys(e[0]).length;let r=this;const a=this.header||this.$attrs.title;a&&(t+=this.parseExtraData(a,'<tr><th colspan=\"'+n+'\">${data}</th></tr>')),t+=\"<tr>\";for(let n in e[0])t+=\"<th>\"+n+\"</th>\";return t+=\"</tr>\",t+=\"</thead>\",t+=\"<tbody>\",e.map(function(e,n){t+=\"<tr>\";for(let n in e)t+=\"<td>\"+r.preprocessLongNum(r.valueReformattedForMultilines(e[n]))+\"</td>\";t+=\"</tr>\"}),t+=\"</tbody>\",null!=this.footer&&(t+=\"<tfoot>\",t+=this.parseExtraData(this.footer,'<tr><td colspan=\"'+n+'\">${data}</td></tr>'),t+=\"</tfoot>\"),'<html xmlns:o=\"urn:schemas-microsoft-com:office:office\" xmlns:x=\"urn:schemas-microsoft-com:office:excel\" xmlns=\"http://www.w3.org/TR/REC-html40\"><head><meta name=ProgId content=Excel.Sheet> <meta name=Generator content=\"Microsoft Excel 11\"><meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>${worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\\x3e<style>br {mso-data-placement: same-cell;}</style></head><body><table>${table}</table></body></html>'.replace(\"${table}\",t).replace(\"${worksheet}\",this.worksheet)},jsonToCSV(e){let t=this;var n=[];const r=this.header||this.$attrs.title;r&&n.push(this.parseExtraData(r,\"${data}\\r\\n\"));for(let t in e[0])n.push(t),n.push(\",\");return n.pop(),n.push(\"\\r\\n\"),e.map(function(e){for(let r in e){let a=e[r]+\"\";t.escapeCsv&&(a='=\"'+a+'\"').match(/[,\"\\n]/)&&(a='\"'+a.replace(/\\\"/g,'\"\"')+'\"'),n.push(a),n.push(\",\")}n.pop(),n.push(\"\\r\\n\")}),null!=this.footer&&n.push(this.parseExtraData(this.footer,\"${data}\\r\\n\")),n.join(\"\")},getProcessedJson(e,t){let n=this.getKeys(e,t),r=[],a=this;return e.map(function(e,t){let i={};for(let t in n){let r=n[t];i[t]=a.getValue(r,e)}r.push(i)}),r},getKeys(e,t){if(t)return t;let n={};for(let t in e[0])n[t]=t;return n},parseExtraData(e,t){let n=\"\";if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]&&(n+=t.replace(\"${data}\",e[r]));else n+=t.replace(\"${data}\",e);return n},getValue(e,t){const n=\"object\"!=typeof e?e:e.field;let r=\"string\"!=typeof n?[]:n.split(\".\"),a=this.defaultValue;return a=n?r.length>1?this.getValueFromNestedItem(t,r):this.parseValue(t[n]):t,e.hasOwnProperty(\"callback\")&&(a=this.getValueFromCallback(a,e.callback)),a},valueReformattedForMultilines:e=>\"string\"==typeof e?e.replace(/\\n/gi,\"<br/>\"):e,preprocessLongNum(e){if(this.stringifyLongNum){if(String(e).startsWith(\"0x\"))return e;if(!isNaN(e)&&\"\"!=e&&(e>99999999999||e<1e-13))return'=\"'+e+'\"'}return e},getValueFromNestedItem(e,t){let n=e;for(let e of t)n&&(n=n[e]);return this.parseValue(n)},getValueFromCallback(e,t){if(\"function\"!=typeof t)return this.defaultValue;const n=t(e);return this.parseValue(n)},parseValue(e){return e||0===e||\"boolean\"==typeof e?e:this.defaultValue},base64ToBlob(e,t){let n=window.btoa(window.unescape(encodeURIComponent(e))),r=atob(n),a=r.length,i=new Uint8ClampedArray(a);for(;a--;)i[a]=r.charCodeAt(a);return new Blob([i],{type:t})}}};var o=function(){var e=this.$createElement;return(this._self._c||e)(\"div\",{attrs:{id:this.idName},on:{click:this.generate}},[this._t(\"default\",[this._v(\" Download \"+this._s(this.name)+\" \")])],2)};o._withStripped=!0;var l=a({render:o,staticRenderFns:[]},void 0,i,void 0,!1,void 0,void 0,void 0);t.a=l}).call(this,n(\"yLpj\"))},BD7w:function(e,t,n){\"use strict\";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"app-container\"},[n(\"div\",{staticClass:\"filter-container\"},[n(\"h2\",[e._v(\"筛选结果\")]),e._v(\" \"),n(\"el-date-picker\",{staticClass:\"filter-item\",attrs:{type:\"monthrange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始月份\",\"end-placeholder\":\"结束月份\"},model:{value:e.listQuery.date,callback:function(t){e.$set(e.listQuery,\"date\",t)},expression:\"listQuery.date\"}}),e._v(\" \"),n(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"150px\",\"margin-left\":\"15px\"},attrs:{placeholder:\"订单编号\",clearable:\"\"},model:{value:e.listQuery.id,callback:function(t){e.$set(e.listQuery,\"id\",t)},expression:\"listQuery.id\"}}),e._v(\" \"),n(\"el-select\",{staticClass:\"filter-item\",staticStyle:{width:\"150px\",\"margin-left\":\"15px\"},attrs:{placeholder:\"申请部门\",clearable:\"\"},model:{value:e.listQuery.deparmtent,callback:function(t){e.$set(e.listQuery,\"deparmtent\",t)},expression:\"listQuery.deparmtent\"}},e._l(e.departments,function(e){return n(\"el-option\",{key:e.id,attrs:{label:e.name,value:e.name}})}),1),e._v(\" \"),n(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"150px\",\"margin-left\":\"15px\"},attrs:{placeholder:\"客户姓名\",clearable:\"\"},model:{value:e.listQuery.client_name,callback:function(t){e.$set(e.listQuery,\"client_name\",t)},expression:\"listQuery.client_name\"}}),e._v(\" \"),n(\"el-input\",{staticClass:\"filter-item \",staticStyle:{width:\"150px\",\"margin-left\":\"15px\"},attrs:{placeholder:\"邮寄地址\",clearable:\"\"},model:{value:e.listQuery.shipping_address,callback:function(t){e.$set(e.listQuery,\"shipping_address\",t)},expression:\"listQuery.shipping_address\"}}),e._v(\" \"),n(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"150px\",\"margin-left\":\"15px\"},attrs:{placeholder:\"联系方式\",clearable:\"\"},model:{value:e.listQuery.contact,callback:function(t){e.$set(e.listQuery,\"contact\",t)},expression:\"listQuery.contact\"}}),e._v(\" \"),n(\"el-button\",{directives:[{name:\"waves\",rawName:\"v-waves\"}],staticClass:\"filter-item\",staticStyle:{width:\"100px\",\"margin-left\":\"15px\"},attrs:{type:\"primary\",icon:\"el-icon-search\"},on:{click:e.handleFilter}},[e._v(\"\\n      搜索\\n    \")]),e._v(\" \"),e.orders&&e.orders.length>0?n(\"downloadexcel\",{staticClass:\"downloadExcelBtn\",attrs:{data:e.orders,\"before-finish\":e.finishDownload}},[e._v(\"\\n      导出数据到Excel\\n    \")]):e._e()],1),e._v(\" \"),n(\"div\",[n(\"div\",{staticStyle:{display:\"block\",\"margin-bottom\":\"20px\"}},[n(\"h3\",{staticStyle:{display:\"inline-block\"}},[e._v(\" 批量上传Excel \")]),e._v(\" \"),n(\"input\",{ref:\"fileInput\",staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"file\"},on:{change:e.onReadExcelFileChange}}),e._v(\" \"),n(\"el-button\",{on:{click:function(t){return e.clearExcelFileInput()}}},[e._v(\"\\n        清除文件\\n      \")]),e._v(\" \"),e.bulkInputData&&e.bulkInputData.length>0?n(\"el-button\",{on:{click:function(t){return e.submitBulkInput()}}},[e._v(\"\\n        批量上传数据已经读取 \"+e._s(e.bulkInputData.length)+\"条 确认提交\\n      \")]):e._e()],1)]),e._v(\" \"),n(\"h2\",[e._v(\"需要审核的订单\")]),e._v(\" \"),n(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.listLoading,expression:\"listLoading\"}],key:e.tableKey,staticStyle:{width:\"100%\"},attrs:{data:e.orders,\"span-method\":e.objectSpanMethod,border:\"\",fit:\"\"}},[n(\"el-table-column\",{attrs:{label:\"订单ID\",prop:\"id\",width:\"80px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var r=t.row;return[n(\"span\",[e._v(e._s(r.id))])]}}])}),e._v(\" \"),n(\"el-table-column\",{attrs:{label:\"申请部门 - 申请人\",prop:\"sales_type\",width:\"150px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var r=t.row;return[n(\"span\",[e._v(e._s(r.department)+\" - \"+e._s(r.added_by_name))])]}}])}),e._v(\" \"),n(\"el-table-column\",{attrs:{label:\"客户姓名\",prop:\"sales_type\",width:\"200px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var r=t.row;return[n(\"span\",[e._v(e._s(r.client_name))])]}}])}),e._v(\" \"),n(\"el-table-column\",{attrs:{label:\"收件地址\",prop:\"sales_type\",width:\"150px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var r=t.row;return[n(\"span\",[e._v(e._s(r.shipping_address))])]}}])}),e._v(\" \"),n(\"el-table-column\",{attrs:{label:\"联系方式\",prop:\"sales_type\",width:\"150px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var r=t.row;return[n(\"span\",[e._v(e._s(r.contact))])]}}])}),e._v(\" \"),n(\"el-table-column\",{attrs:{label:\"申请时间\",prop:\"sales_type\",width:\"100px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var r=t.row;return[n(\"span\",[e._v(e._s(e.moment(r.date).format(\"YYYY-MM-DD\")))])]}}])}),e._v(\" \"),n(\"el-table-column\",{attrs:{label:\"产品类型\",width:\"100px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var r=t.row;return[n(\"el-tag\",{staticClass:\"tag\",attrs:{color:r.tag_color}},[e._v(e._s(r.product_type))])]}}])}),e._v(\" \"),n(\"el-table-column\",{attrs:{label:\"产品细类\",width:\"140px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var r=t.row;return[n(\"el-tag\",{staticClass:\"sub_type_tag\",attrs:{color:r.sub_type_tag_color}},[e._v(e._s(r.product_sub_type))])]}}])}),e._v(\" \"),n(\"el-table-column\",{attrs:{label:\"产品名称\",width:\"150px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var r=t.row;return[n(\"span\",{staticClass:\"link-type\",on:{click:function(t){return e.handleUpdate(r)}}},[e._v(e._s(r.product_title))])]}}])}),e._v(\" \"),n(\"el-table-column\",{attrs:{label:\"产品型号\",width:\"100px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var r=t.row;return[n(\"span\",[e._v(e._s(r.size))])]}}])}),e._v(\" \"),n(\"el-table-column\",{attrs:{label:\"数量\",width:\"100px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var r=t.row;return[n(\"span\",[e._v(e._s(r.quantity))])]}}])}),e._v(\" \"),n(\"el-table-column\",{attrs:{label:\"产品备注\",width:\"250px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var r=t.row;return[n(\"span\",[e._v(e._s(r.product_note))])]}}])}),e._v(\" \"),n(\"el-table-column\",{attrs:{label:\"仓库发货编号\",width:\"200px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var r=t.row;return[n(\"span\",[e._v(e._s(r.tracking_code))])]}}])}),e._v(\" \"),n(\"el-table-column\",{attrs:{label:\"备注\",width:\"250px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var r=t.row;return[n(\"span\",[e._v(e._s(r.note))])]}}])}),e._v(\" \"),n(\"el-table-column\",{attrs:{label:\"审核订单\",width:\"300px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var r=t.row;return[e.id===r.added_by_id?n(\"el-button\",{attrs:{type:\"danger\",plain:\"\"},on:{click:function(t){return e.deleteOrder(r)}}},[e._v(\"取消订单\")]):e._e(),e._v(\" \"),7===e.role||1===e.role?n(\"el-button\",{attrs:{type:\"primary\",plain:\"\"},on:{click:function(t){return e.updateDeliveryCode(r)}}},[e._v(\"发货\")]):e._e()]}}])})],1),e._v(\" \"),n(\"pagination\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.total>0,expression:\"total>0\"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{\"update:page\":function(t){return e.$set(e.listQuery,\"page\",t)},\"update:limit\":function(t){return e.$set(e.listQuery,\"limit\",t)},pagination:e.getAllInReviewMarketingOrders}})],1)};r._withStripped=!0;n(\"rGqo\");var a=n(\"23J+\"),i=n(\"0doe\"),o=n(\"8tky\"),l=n(\"+Lc1\"),s=n(\"ZySA\"),c=n(\"Mz3J\"),u=n(\"L2JU\"),d=n(\"wd/R\"),p=n.n(d),f={name:\"ComplexTable\",components:{Pagination:c.a,downloadexcel:o.a},directives:{waves:s.a},filters:{},data:function(){return{tableKey:0,orders:null,total:0,listLoading:!0,listQuery:{page:1,limit:10,id:void 0,department:void 0,client_name:void 0,shipping_address:void 0,contact:void 0,is_delivered:0},bulkInputData:void 0,rowSpans:null,departments:[{id:1,name:\"运营部\"},{id:2,name:\"市场部\"},{id:3,name:\"销售部\"},{id:4,name:\"设计部\"},{id:5,name:\"产品部\"}]}},created:function(){},computed:Object(a.a)({},Object(u.b)([\"id\",\"role\"])),beforeRouteEnter:function(e,t,n){n(function(e){e.getAllInReviewMarketingOrders(),e.getAllInReviewMarketingOrdersCount(),n()})},methods:{calculateRowSpan:function(){var e=[],t=0;this.orders.forEach(function(n){var r=!1;if(e.forEach(function(e){e.id===n.id&&(r=!0,e.end++,e.rowSpan++,t=e.start+e.rowSpan)}),!r){var a={id:n.id,start:t,end:t+1,rowSpan:1};t++,e.push(a)}}),this.rowSpans=e},getAllInReviewMarketingOrders:function(){var e=this;this.listLoading=!0,this.listQuery.date&&this.listQuery.date.length>1&&(this.listQuery.start_date=p()(this.listQuery.date[0]).format(\"YYYY-MM-DD\"),this.listQuery.end_date=p()(this.listQuery.date[1]).format(\"YYYY-MM-DD\")),l.a.getAllMarketingOrder(this.listQuery).then(function(t){e.orders=t,e.listLoading=!1,e.calculateRowSpan()}).catch(function(t){e.$message({message:\"getAllSales 读取库存失败，请联系徐神检查\",type:\"error\"}),e.listLoading=!1})},getAllInReviewMarketingOrdersCount:function(){var e=this;l.a.getMarketingOrderInReviewCount(this.listQuery).then(function(t){e.total=t.total})},objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex,n=e.columnIndex;if(n<6||n>=12){var r={rowspan:0,colspan:0};return this.rowSpans.forEach(function(e){t>=e.start&&t<e.end&&(t-e.start)%e.rowSpan==0&&(r={rowspan:e.rowSpan,colspan:1})}),r}},handleFilter:function(){this.listQuery.page=1,this.getAllInReviewMarketingOrders(),this.getAllInReviewMarketingOrdersCount()},clearFullyPaid:function(){this.listQuery.fully_paid=void 0},deleteOrder:function(e){var t=this;this.$confirm(\"是否确定删除本订单\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){t.sendDeleteOrderRequest(e.id)}).catch(function(){})},sendDeleteOrderRequest:function(e){var t=this;this.listLoading=!0,l.a.deleteMarketingOrder(e).then(function(e){t.listLoading=!1,t.$alert(\"删除成功\",\"成功\",{confirmButtonText:\"确定\",callback:function(e){t.page=1,t.getAllInReviewMarketingOrders(),t.getAllInReviewMarketingOrdersCount()}})}).catch(function(e){t.$message({message:\"订单修改失败，请联系徐神检查\",type:\"error\"}),t.listLoading=!1})},updateDeliveryCode:function(e){var t=this;this.$prompt(\"请输入云仓发货编号\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\"}).then(function(n){var r=n.value;t.$confirm(\"确定发货编号为\"+r,\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){t.sendUpdateSalesDeliveryRequest(e.id,r)}).catch(function(){})}).catch(function(){t.$message({type:\"info\",message:\"取消输入\"})})},sendUpdateSalesDeliveryRequest:function(e,t){var n=this;this.listLoading=!0,l.a.updateMarketingOrderDeliveryCode({order_id:e,delivery_code:t}).then(function(e){n.listLoading=!1,n.$alert(\"订单修改成功\",\"成功\",{confirmButtonText:\"确定\",callback:function(e){n.page=1,n.getAllInReviewMarketingOrders(),n.getAllInReviewMarketingOrdersCount()}})}).catch(function(e){n.$message({message:\"订单修改失败，请联系徐神检查\",type:\"error\"}),n.listLoading=!1})},onReadExcelFileChange:function(e){var t=this,n=e.target.files?e.target.files[0]:null;this.bulkInputData=[];var r=[];Object(i.a)(n).then(function(e){r=[];for(var n=1;n<e.length;n++){var a=e[n],i={id:a[0],tracking_code:a[1]};r.push(i)}0===r.length?t.$alert(\"读取文件失败或文件为空\",\"失败\",{confirmButtonText:\"确定\"}):(t.bulkInputData=r,t.$alert(\"文件读取成功，数据已经导入。请检查后提交\",\"成功\",{confirmButtonText:\"确定\"}))})},clearExcelFileInput:function(){this.$refs.fileInput.value=null,this.bulkInputData=[]},submitBulkInput:function(){var e=this;this.$confirm(\"是否确定批量发货\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){e.sendBulkInputDataRequest()}).catch(function(){e.$message({message:\"失败，请联系徐神检查\",type:\"error\"})})},sendBulkInputDataRequest:function(){var e=this;this.bulkInputData&&0!==this.bulkInputData.length?(this.listLoading=!0,l.a.updateBulkMarketingOrderDeliveryCode(this.bulkInputData).then(function(t){e.listLoading=!1,e.$alert(\"批量发货成功\",\"成功\",{confirmButtonText:\"确定\",callback:function(t){e.$refs.fileInput.value=null,e.getAllInReviewMarketingOrders(),e.getAllInReviewMarketingOrdersCount()}})}).catch(function(t){e.$message({message:\"下单失败，请联系徐神检查\",type:\"error\"}),e.listLoading=!1})):this.$message({message:\"没有批量上传数据，请检查数据源\",type:\"error\"})},finishDownload:function(){alert(\"下载完成\")}}},h=(n(\"Sz/s\"),n(\"KHd+\")),v=Object(h.a)(f,r,[],!1,null,\"0000082d\",null);v.options.__file=\"src/views/sales/in-review-marketing-order.vue\";t.default=v.exports},\"Sz/s\":function(e,t,n){\"use strict\";var r=n(\"1zXc\");n.n(r).a},ZySA:function(e,t,n){\"use strict\";n(\"jUE0\");var r=\"@@wavesContext\";function a(e,t){function n(n){var r=Object.assign({},t.value),a=Object.assign({ele:e,type:\"hit\",color:\"rgba(0, 0, 0, 0.15)\"},r),i=a.ele;if(i){i.style.position=\"relative\",i.style.overflow=\"hidden\";var o=i.getBoundingClientRect(),l=i.querySelector(\".waves-ripple\");switch(l?l.className=\"waves-ripple\":((l=document.createElement(\"span\")).className=\"waves-ripple\",l.style.height=l.style.width=Math.max(o.width,o.height)+\"px\",i.appendChild(l)),a.type){case\"center\":l.style.top=o.height/2-l.offsetHeight/2+\"px\",l.style.left=o.width/2-l.offsetWidth/2+\"px\";break;default:l.style.top=(n.pageY-o.top-l.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+\"px\",l.style.left=(n.pageX-o.left-l.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+\"px\"}return l.style.backgroundColor=a.color,l.className=\"waves-ripple z-active\",!1}}return e[r]?e[r].removeHandle=n:e[r]={removeHandle:n},n}var i={bind:function(e,t){e.addEventListener(\"click\",a(e,t),!1)},update:function(e,t){e.removeEventListener(\"click\",e[r].removeHandle,!1),e.addEventListener(\"click\",a(e,t),!1)},unbind:function(e){e.removeEventListener(\"click\",e[r].removeHandle,!1),e[r]=null,delete e[r]}},o=function(e){e.directive(\"waves\",i)};window.Vue&&(window.waves=i,Vue.use(o)),i.install=o;t.a=i},jUE0:function(e,t,n){}}]);","extractedComments":[]}