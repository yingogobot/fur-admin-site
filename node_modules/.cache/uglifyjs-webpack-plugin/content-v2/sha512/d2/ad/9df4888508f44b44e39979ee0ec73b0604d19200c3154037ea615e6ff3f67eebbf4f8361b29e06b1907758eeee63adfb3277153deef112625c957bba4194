{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{\"9R6f\":function(e,t,a){\"use strict\";var n=a(\"FKJx\");a.n(n).a},FKJx:function(e,t,a){},P6la:function(e,t,a){\"use strict\";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"app-container\"},[a(\"div\",{staticClass:\"filter-container\"},[a(\"h2\",[e._v(\"筛选结果\")]),e._v(\" \"),a(\"el-date-picker\",{staticClass:\"filter-item\",staticStyle:{\"margin-left\":\"15px\"},attrs:{type:\"monthrange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始月份\",\"end-placeholder\":\"结束月份\"},on:{change:e.handleFilter},model:{value:e.listQuery.date,callback:function(t){e.$set(e.listQuery,\"date\",t)},expression:\"listQuery.date\"}}),e._v(\" \"),a(\"el-button\",{directives:[{name:\"waves\",rawName:\"v-waves\"}],staticClass:\"filter-item\",staticStyle:{width:\"100px\",\"margin-left\":\"15px\"},attrs:{type:\"primary\",icon:\"el-icon-search\"},on:{click:e.handleFilter}},[e._v(\"\\n      搜索\\n    \")])],1),e._v(\" \"),a(\"h2\",[e._v(e._s(e.moment(this.listQuery.date[0]).format(\"YYYY-MM-01\"))+\" 至 \"+e._s(e.moment(this.listQuery.date[1]).format(\"YYYY-MM-01\"))+\" 销售基本数据\")]),e._v(\" \"),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.listLoading,expression:\"listLoading\"}],key:e.tableKey,staticStyle:{width:\"100%\"},attrs:{data:e.sales,\"span-method\":e.objectSpanMethod,border:\"\",fit:\"\"}},[a(\"el-table-column\",{attrs:{label:\"分销大区\",prop:\"id\",width:\"80px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var n=t.row;return[a(\"span\",[e._v(e._s(n.region_title))])]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"大区经理\",prop:\"sales_type\",width:\"150px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var n=t.row;return[a(\"span\",[e._v(e._s(n.region_manager_name))])]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"大区本月总销售\",prop:\"sales_type\",width:\"150px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var n=t.row;return[a(\"span\",[e._v(e._s(n.region_total_sales?n.region_total_sales:0))])]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"销售地区\",prop:\"sales_type\",width:\"150px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var n=t.row;return[a(\"span\",[e._v(e._s(n.area_title))])]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"地区经理\",prop:\"sales_type\",width:\"150px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var n=t.row;return[a(\"span\",[e._v(e._s(n.area_manager_name))])]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"地区本月总销售\",prop:\"sales_type\",width:\"150px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var n=t.row;return[a(\"span\",[e._v(e._s(n.area_total_sales?n.area_total_sales:0))])]}}])})],1)],1)};n._withStripped=!0;a(\"rGqo\");var l=a(\"23J+\"),s=a(\"xUCC\"),r=a(\"ZySA\"),i=(a(\"7Qib\"),a(\"Mz3J\")),o=a(\"L2JU\"),c=a(\"wd/R\"),d=a.n(c),p={name:\"ComplexTable\",components:{Pagination:i.a},directives:{waves:r.a},filters:{},data:function(){return{tableKey:0,listLoading:!1,sales:null,listQuery:{page:1,limit:100,date:[]},rowSpans:null}},created:function(){this.listQuery.date=[new Date,d()().add(1,\"months\")]},computed:Object(l.a)({},Object(o.b)([\"id\",\"role\"])),beforeRouteEnter:function(e,t,a){a(function(e){e.getReport(),a()})},methods:{calculateRowSpan:function(){var e=[],t=0;this.sales.forEach(function(a){var n=!1;if(e.forEach(function(e){e.region_id===a.region_id&&(n=!0,e.end++,e.rowSpan++,t=e.start+e.rowSpan)}),!n){var l={region_id:a.region_id,start:t,end:t+1,rowSpan:1};t++,e.push(l)}}),this.rowSpans=e},getReport:function(){var e=this;this.listLoading=!0,this.listQuery.date&&this.listQuery.date.length>1&&(this.listQuery.start_date=d()(this.listQuery.date[0]).format(\"YYYY-MM-01\"),this.listQuery.end_date=d()(this.listQuery.date[1]).format(\"YYYY-MM-01\")),s.a.getGeneralSalesReport(this.listQuery).then(function(t){e.sales=t,e.listLoading=!1,e.calculateRowSpan()}).catch(function(t){e.$message({message:\"getAllSales 读取库存失败，请联系徐神检查\",type:\"error\"}),e.listLoading=!1})},objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex;if(e.columnIndex<3){var a={rowspan:0,colspan:0};return this.rowSpans.forEach(function(e){t>=e.start&&t<e.end&&(t-e.start)%e.rowSpan==0&&(a={rowspan:e.rowSpan,colspan:1})}),a}},handleFilter:function(){this.getReport()}}},u=(a(\"9R6f\"),a(\"KHd+\")),f=Object(u.a)(p,n,[],!1,null,\"24303d2b\",null);f.options.__file=\"src/views/report/general-sales-report.vue\";t.default=f.exports},ZySA:function(e,t,a){\"use strict\";a(\"jUE0\");var n=\"@@wavesContext\";function l(e,t){function a(a){var n=Object.assign({},t.value),l=Object.assign({ele:e,type:\"hit\",color:\"rgba(0, 0, 0, 0.15)\"},n),s=l.ele;if(s){s.style.position=\"relative\",s.style.overflow=\"hidden\";var r=s.getBoundingClientRect(),i=s.querySelector(\".waves-ripple\");switch(i?i.className=\"waves-ripple\":((i=document.createElement(\"span\")).className=\"waves-ripple\",i.style.height=i.style.width=Math.max(r.width,r.height)+\"px\",s.appendChild(i)),l.type){case\"center\":i.style.top=r.height/2-i.offsetHeight/2+\"px\",i.style.left=r.width/2-i.offsetWidth/2+\"px\";break;default:i.style.top=(a.pageY-r.top-i.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+\"px\",i.style.left=(a.pageX-r.left-i.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+\"px\"}return i.style.backgroundColor=l.color,i.className=\"waves-ripple z-active\",!1}}return e[n]?e[n].removeHandle=a:e[n]={removeHandle:a},a}var s={bind:function(e,t){e.addEventListener(\"click\",l(e,t),!1)},update:function(e,t){e.removeEventListener(\"click\",e[n].removeHandle,!1),e.addEventListener(\"click\",l(e,t),!1)},unbind:function(e){e.removeEventListener(\"click\",e[n].removeHandle,!1),e[n]=null,delete e[n]}},r=function(e){e.directive(\"waves\",s)};window.Vue&&(window.waves=s,Vue.use(r)),s.install=r;t.a=s},jUE0:function(e,t,a){}}]);","extractedComments":[]}