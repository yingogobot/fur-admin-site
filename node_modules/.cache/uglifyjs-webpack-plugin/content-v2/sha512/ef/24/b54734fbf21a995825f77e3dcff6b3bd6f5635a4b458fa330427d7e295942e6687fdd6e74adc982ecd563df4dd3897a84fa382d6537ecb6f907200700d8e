{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{\"0CZl\":function(t,e,n){},\"FXY/\":function(t,e,n){\"use strict\";var a=n(\"0CZl\");n.n(a).a},S4mp:function(t,e,n){\"use strict\";var a=n(\"DyJX\");e.a={getAllResalers:function(t){return new Promise(function(e,n){a.a.post(\"resaler/get_all\",t).then(function(t){return e(t)}).catch(function(t){return n(t)})})},getResalersCount:function(){return new Promise(function(t,e){a.a.post(\"resaler/get_count\").then(function(e){return t(e)}).catch(function(t){return e(t)})})},addResaler:function(t){return new Promise(function(e,n){a.a.post(\"resaler/add\",t).then(function(t){return e(t)}).catch(function(t){return n(t)})})},deleteResaler:function(t){return new Promise(function(e,n){var i={id:t};a.a.post(\"resaler/delete\",i).then(function(t){return e(t)}).catch(function(t){return n(t)})})}}},YwBl:function(t,e,n){\"use strict\";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"app-container\"},[n(\"div\",[n(\"h2\",{staticClass:\"title\"},[t._v(\"分销渠道\")]),t._v(\" \"),n(\"el-button\",{staticClass:\"create-button\",staticStyle:{width:\"200px\",\"margin-left\":\"10px\"},attrs:{type:\"success\",icon:\"el-icon-edit\"},on:{click:t.handleCreate}},[t._v(\"\\n      添加新分销渠道\\n    \")])],1),t._v(\" \"),n(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.listLoading,expression:\"listLoading\"}],key:t.tableKey,staticStyle:{width:\"100%\"},attrs:{data:t.resalers,border:\"\",fit:\"\",\"highlight-current-row\":\"\"}},[n(\"el-table-column\",{attrs:{label:\"分销渠道ID\",prop:\"id\",width:\"100px\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){var a=e.row;return[n(\"span\",[t._v(t._s(a.id))])]}}])}),t._v(\" \"),n(\"el-table-column\",{attrs:{label:\"渠道名称\",prop:\"inventory_type\",width:\"250px\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){var a=e.row;return[n(\"span\",[t._v(t._s(a.name))])]}}])}),t._v(\" \"),n(\"el-table-column\",{attrs:{label:\"渠道内部评级\",prop:\"inventory_type\",width:\"200px\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){var a=e.row;return[n(\"span\",[t._v(t._s(a.level))])]}}])}),t._v(\" \"),n(\"el-table-column\",{attrs:{label:\"负责人名字\",prop:\"inventory_type\",width:\"200px\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){var a=e.row;return[n(\"span\",[t._v(t._s(a.manager))])]}}])}),t._v(\" \"),n(\"el-table-column\",{attrs:{label:\"地址\",prop:\"inventory_type\",width:\"200px\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){var a=e.row;return[n(\"span\",[t._v(t._s(a.address))])]}}])}),t._v(\" \"),n(\"el-table-column\",{attrs:{label:\"备注\",prop:\"inventory_type\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){var a=e.row;return[n(\"span\",[t._v(t._s(a.note))])]}}])}),t._v(\" \"),n(\"el-table-column\",{attrs:{label:\"操作\",width:\"300px\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){var a=e.row;return[n(\"el-button\",{attrs:{type:\"primary\",plain:\"\"},on:{click:function(e){return t.editResaler(a)}}},[t._v(\"编辑\")]),t._v(\" \"),n(\"el-button\",{attrs:{type:\"danger\",plain:\"\"},on:{click:function(e){return t.deleteResaler(a)}}},[t._v(\"删除\")])]}}])})],1),t._v(\" \"),n(\"pagination\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.total>0,expression:\"total>0\"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{\"update:page\":function(e){return t.$set(t.listQuery,\"page\",e)},\"update:limit\":function(e){return t.$set(t.listQuery,\"limit\",e)},pagination:t.getResalers}}),t._v(\" \"),n(\"el-dialog\",{attrs:{title:\"添加新分销渠道\",visible:t.dialogFormVisible,width:\"80%\"},on:{\"update:visible\":function(e){t.dialogFormVisible=e}}},[n(\"el-form\",{ref:\"dataForm\",staticStyle:{\"margin-left\":\"20px\"},attrs:{model:t.temp,\"label-position\":\"left\",\"label-width\":\"10px\"}},[n(\"div\",[n(\"h3\",{staticStyle:{display:\"inline-block\",width:\"100px\",\"vertical-align\":\"top\",\"margin-top\":\"0\"}},[t._v(\" 分销渠道信息 \")]),t._v(\" \"),n(\"div\",{staticStyle:{display:\"inline-block\"}},[n(\"div\",{staticStyle:{\"margin-bottom\":\"5px\"}},[n(\"div\",{staticClass:\"input-title\"},[t._v(\"渠道名称\")]),t._v(\" \"),n(\"div\",{staticClass:\"input-title\"},[t._v(\"负责人名字\")]),t._v(\" \"),n(\"div\",{staticClass:\"input-title\"},[t._v(\"地址\")])]),t._v(\" \"),n(\"el-form-item\",{staticStyle:{\"margin-bottom\":\"10px\"},attrs:{label:\"\",prop:\"resaler\"}},[n(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"200px\"},attrs:{placeholder:\"渠道名称\"},model:{value:t.temp.name,callback:function(e){t.$set(t.temp,\"name\",e)},expression:\"temp.name\"}}),t._v(\" \"),n(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"200px\"},attrs:{placeholder:\"负责人名字\"},model:{value:t.temp.manager,callback:function(e){t.$set(t.temp,\"manager\",e)},expression:\"temp.manager\"}}),t._v(\" \"),n(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"200px\"},attrs:{placeholder:\"负责人名字\"},model:{value:t.temp.address,callback:function(e){t.$set(t.temp,\"address\",e)},expression:\"temp.address\"}})],1)],1),t._v(\" \"),n(\"div\",[n(\"h3\",{staticStyle:{display:\"inline-block\",width:\"100px\",\"vertical-align\":\"top\",\"margin-top\":\"0\"}},[t._v(\" 备注 \")]),t._v(\" \"),n(\"el-input\",{staticStyle:{width:\"70%\"},attrs:{type:\"textarea\",autosize:{minRows:2,maxRows:4},placeholder:\"备注\"},model:{value:t.temp.note,callback:function(e){t.$set(t.temp,\"note\",e)},expression:\"temp.note\"}})],1)])]),t._v(\" \"),n(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[n(\"el-button\",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(\"\\n        取消\\n      \")]),t._v(\" \"),n(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(e){return t.addNewResaler()}}},[t._v(\"\\n        提交\\n      \")])],1)],1)],1)};a._withStripped=!0;n(\"f3/d\");var i=n(\"23J+\"),l=n(\"S4mp\"),s=(n(\"7Qib\"),n(\"Mz3J\")),r=n(\"L2JU\"),o={name:\"ComplexTable\",components:{Pagination:s.a},filters:{},data:function(){return{tableKey:0,resalers:null,total:0,listLoading:!0,dialogFormVisible:!1,rowSpans:null,listQuery:{page:1,limit:10},temp:{name:null,manager:null,note:null,address:null}}},created:function(){this.getResalers(),this.getCount()},computed:Object(i.a)({},Object(r.b)([\"id\"])),methods:{getResalers:function(){var t=this;this.listLoading=!0,l.a.getAllResalers(this.listQuery).then(function(e){t.resalers=e,t.listLoading=!1}).catch(function(e){t.$message({message:\"读取库存失败，请联系徐神检查\",type:\"error\"}),t.listLoading=!1})},getCount:function(){var t=this;l.a.getResalersCount().then(function(e){t.total=e.total})},handleCreate:function(){this.dialogFormVisible=!0},addNewResaler:function(){var t=this;this.$confirm(\"确定添加?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){t.sendNewResalerRequest()}).catch(function(t){})},sendNewResalerRequest:function(){var t=this;this.temp.name&&this.temp.manager?(this.listLoading=!0,l.a.addResaler(this.temp).then(function(e){t.listLoading=!1,t.$alert(\"库存添加成功\",\"成功\",{confirmButtonText:\"确定\",callback:function(e){t.page=1,t.getResalers(),t.getCount(),t.dialogFormVisible=!1,t.temp={name:null,manager:null,note:null,address:null}}})}).catch(function(e){t.$message({message:\"添加失败，请联系徐神检查\",type:\"error\"}),t.listLoading=!1})):this.$message({message:\"必须填写所有信息\",type:\"error\"})},editResaler:function(){},deleteResaler:function(t){var e=this;this.$confirm(\"确定删除>>\"+t.name+\"<<吗？\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){e.sendDeleteResalerRequest(t.id)}).catch(function(t){})},sendDeleteResalerRequest:function(t){var e=this;this.listLoading=!0,l.a.deleteResaler(t).then(function(t){e.listLoading=!1,e.$alert(\"删除成功\",\"成功\",{confirmButtonText:\"确定\",callback:function(t){e.page=1,e.getResalers(),e.getCount()}})}).catch(function(t){e.$message({message:\"删除失败，请联系徐神检查\",type:\"error\"}),e.listLoading=!1})}}},c=(n(\"FXY/\"),n(\"KHd+\")),u=Object(c.a)(o,a,[],!1,null,\"1e885e26\",null);u.options.__file=\"src/views/data/resaler.vue\";e.default=u.exports}}]);","extractedComments":[]}