{"remainingRequest":"/Users/yinxu/Desktop/Dev/Fur-Admin/fur-admin-site/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yinxu/Desktop/Dev/Fur-Admin/fur-admin-site/src/views/resaler/resaler-area-list.vue?vue&type=style&index=0&id=73be0bc8&lang=scss&scoped=true&","dependencies":[{"path":"/Users/yinxu/Desktop/Dev/Fur-Admin/fur-admin-site/src/views/resaler/resaler-area-list.vue","mtime":1607424939732},{"path":"/Users/yinxu/Desktop/Dev/Fur-Admin/fur-admin-site/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/yinxu/Desktop/Dev/Fur-Admin/fur-admin-site/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/yinxu/Desktop/Dev/Fur-Admin/fur-admin-site/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yinxu/Desktop/Dev/Fur-Admin/fur-admin-site/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yinxu/Desktop/Dev/Fur-Admin/fur-admin-site/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yinxu/Desktop/Dev/Fur-Admin/fur-admin-site/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.title {\n  display: inline-block;\n}\n\n.create-button {\n  margin-left: 50px !important;\n}\n\n.tag {\n  color: white;\n  font-size: 14px;\n  width: 100px;\n}\n\n.sub_type_tag {\n  color: white;\n  font-size: 14px;\n  width: 120px;\n}\n.input-title {\n  display: inline-block;\n  width: 200px;\n  line-height: 25px;\n  font-size: 14px;\n  margin-left: 10px;\n}\n",{"version":3,"sources":["resaler-area-list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4PA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"resaler-area-list.vue","sourceRoot":"src/views/resaler","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <div>\n    <h2 class=\"title\">分销区域</h2>\n      <el-button class=\"create-button\" style=\"width: 200px; margin-left: 10px;\" type=\"success\" icon=\"el-icon-edit\" @click=\"handleCreate\">\n        添加新分销区域\n      </el-button>\n    </div>\n    <el-table\n      :key=\"tableKey\"\n      v-loading=\"listLoading\"\n      :data=\"resalers\"\n      border\n      fit\n      highlight-current-row\n      style=\"width: 100%;\"\n    >\n      <el-table-column label=\"分销渠道ID\" prop=\"id\" width=\"100px\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          <span>{{ row.id }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"渠道名称\" prop=\"inventory_type\" width=\"250px\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          <span>{{ row.name }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"渠道内部评级\" prop=\"inventory_type\" width=\"200px\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          <span>{{ row.level }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"负责人名字\" prop=\"inventory_type\" width=\"200px\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          <span>{{ row.manager }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"地址\" prop=\"inventory_type\" width=\"200px\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          <span>{{ row.address }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"备注\" prop=\"inventory_type\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          <span>{{ row.note }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" width=\"300px\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          <el-button type=\"primary\" plain @click=\"editResaler(row)\">编辑</el-button>\n          <el-button type=\"danger\" plain @click=\"deleteResaler(row)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <pagination v-show=\"total>0\" :total=\"total\" :page.sync=\"listQuery.page\" :limit.sync=\"listQuery.limit\" @pagination=\"getRegions\" />\n\n    <el-dialog title=\"添加新分销渠道\" :visible.sync=\"dialogFormVisible\" width=\"80%\">\n      <el-form ref=\"dataForm\"\n        :model=\"temp\" \n        label-position=\"left\" \n        label-width=\"10px\" \n        style=\"margin-left:20px;\">\n        <div>\n          <h3 style=\"display: inline-block; width: 100px; vertical-align: top; margin-top: 0;\"> 分销渠道信息 </h3>\n          <div style=\"display: inline-block;\">\n            <div style=\" margin-bottom: 5px;\">\n              <div class=\"input-title\">渠道名称</div>\n              <div class=\"input-title\">负责人名字</div>\n              <div class=\"input-title\">地址</div>\n            </div>\n            <el-form-item label=\"\" prop=\"resaler\" style=\"margin-bottom: 10px;\">\n              <el-input placeholder=\"渠道名称\" v-model=\"temp.name\" style=\"width: 200px;\" class=\"filter-item\" />\n              <el-input placeholder=\"负责人名字\" v-model=\"temp.manager\" style=\"width: 200px;\" class=\"filter-item\" />\n              <el-input placeholder=\"负责人名字\" v-model=\"temp.address\" style=\"width: 200px;\" class=\"filter-item\" />\n            </el-form-item>\n          </div>\n          <div>\n          <h3 style=\"display: inline-block; width: 100px; vertical-align: top; margin-top: 0;\"> 备注 </h3>\n          <el-input\n            type=\"textarea\"\n            :autosize=\"{ minRows: 2, maxRows: 4}\"\n            placeholder=\"备注\"\n            v-model=\"temp.note\"\n            style=\"width: 70%\" />\n            </div>\n        </div>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">\n          取消\n        </el-button>\n        <el-button type=\"primary\" @click=\"addNewResaler()\">\n          提交\n        </el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport ResalerAPI from '@/api/resaler'\n\nimport { parseTime } from '@/utils'\nimport Pagination from '@/components/Pagination' // secondary package based on el-pagination\nimport { mapGetters } from 'vuex'\n\nexport default {\n  name: 'ComplexTable',\n  components: { Pagination },\n  filters: {},\n  data() {\n    return {\n      tableKey: 0,\n      resalerRegions: null,\n      total: 0,\n      listLoading: true,\n      dialogFormVisible: false,\n      rowSpans: null,\n      listQuery: {\n        page: 1,\n        limit: 10\n      },\n      temp: {\n        title: null\n      }\n    }\n  },\n  created() {\n    this.getResalerRegions()\n    this.getResalerRegionsCount()\n  },\n  computed: {\n    ...mapGetters([\n      'id'\n    ])\n  },\n  methods: {\n    getRegions() {\n      this.listLoading = true\n      ResalerAPI.getAllResalerRegions(this.listQuery)\n        .then(response => {\n          this.resalerRegions = response\n          this.listLoading = false\n        })\n        .catch(err => {\n          this.$message({\n            message: '读取库存失败，请联系徐神检查',\n            type: 'error'\n          })\n          this.listLoading = false\n        })\n    },\n    getCount() {\n      ResalerAPI.getResalerRegionsCount()\n        .then(response => {\n          this.total = response.total\n        })\n    },\n    handleCreate() {\n      this.dialogFormVisible = true\n    },\n    addNewResaler() {\n      this.$confirm('确定添加?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.sendNewResalerRequest()\n      }).catch((err) => {   \n        console.log(err)     \n      });\n    },\n    sendNewResalerRequest() {\n      if (!this.temp.name || !this.temp.manager) {\n        this.$message({\n          message: '必须填写所有信息',\n          type: 'error'\n        })\n    } else {\n      this.listLoading = true\n      ResalerAPI.addResalerRegion(this.temp)\n        .then(response => {\n          this.listLoading = false\n            this.$alert('库存添加成功', '成功', {\n              confirmButtonText: '确定',\n              callback: action => {\n                this.page = 1\n                this.getRegions()\n                this.getCount()\n                this.dialogFormVisible = false;\n                this.temp = {\n                  name:null,\n                  manager: null,\n                  note: null,\n                  address: null\n                }\n              }\n            });\n        })\n        .catch(err => {\n          console.log(err)     \n          this.$message({\n            message: '添加失败，请联系徐神检查',\n            type: 'error'\n          })\n          this.listLoading = false\n        })\n      }\n    },\n    editResaler() {\n\n    },\n    deleteResaler(item) {\n      this.$confirm('确定删除>>' + item.name + '<<吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.sendDeleteResalerRequest(item.id)\n      }).catch((err) => {   \n        console.log(err)     \n      });\n    },\n    sendDeleteResalerRequest(id) {\n      this.listLoading = true\n      ResalerAPI.deleteResaler(id)\n        .then(response => {\n          this.listLoading = false\n            this.$alert('删除成功', '成功', {\n              confirmButtonText: '确定',\n              callback: action => {\n                this.page = 1\n                this.getResalers()\n                this.getCount()\n              }\n            });\n        })\n        .catch(err => {\n          console.log(err)     \n          this.$message({\n            message: '删除失败，请联系徐神检查',\n            type: 'error'\n          })\n          this.listLoading = false\n        })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n  .title {\n    display: inline-block;\n  }\n\n  .create-button {\n    margin-left: 50px !important;\n  }\n\n  .tag {\n    color: white;\n    font-size: 14px;\n    width: 100px;\n  }\n\n  .sub_type_tag {\n    color: white;\n    font-size: 14px;\n    width: 120px;\n  }\n  .input-title {\n    display: inline-block;\n    width: 200px;\n    line-height: 25px;\n    font-size: 14px;\n    margin-left: 10px;\n  }\n</style>\n"]}]}