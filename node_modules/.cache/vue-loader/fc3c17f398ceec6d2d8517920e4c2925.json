{"remainingRequest":"/Users/yinxu/Desktop/Dev/Fur-Admin/vue-element-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yinxu/Desktop/Dev/Fur-Admin/vue-element-admin/src/views/inventory/inventory-out.vue?vue&type=template&id=34fa29c0&scoped=true&","dependencies":[{"path":"/Users/yinxu/Desktop/Dev/Fur-Admin/vue-element-admin/src/views/inventory/inventory-out.vue","mtime":1574936714457},{"path":"/Users/yinxu/Desktop/Dev/Fur-Admin/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yinxu/Desktop/Dev/Fur-Admin/vue-element-admin/node_modules/vue-loader/lib/loaders/templateLoader.js","mtime":499162500000},{"path":"/Users/yinxu/Desktop/Dev/Fur-Admin/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yinxu/Desktop/Dev/Fur-Admin/vue-element-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n<div class=\"app-container\">\n  <div class=\"filter-container\">\n    <h2>筛选结果</h2>\n    <el-input v-model=\"listQuery.inventory_out_id\" placeholder=\"出库批次\" style=\"width: 150px;\" class=\"filter-item\" @keyup.enter.native=\"handleFilter\" />\n    <el-select v-model=\"listQuery.inventory_out_type\" placeholder=\"出库类型\" clearable style=\"width: 150px; margin-left: 15px;\" class=\"filter-item\">\n      <el-option v-for=\"item in inventoryOutTypes\" :key=\"item.id\" :label=\"item.title\" :value=\"item.id\" />\n    </el-select>\n    <el-select v-if=\"listQuery.inventory_type === 1\" v-model=\"listQuery.sales_channel\" placeholder=\"销售渠道\" clearable style=\"width: 150px; margin-left: 15px;\" class=\"filter-item\">\n      <el-option v-for=\"item in salesChannel\" :key=\"item.id\" :label=\"item.title\" :value=\"item.id\" />\n    </el-select>\n    <el-select v-if=\"listQuery.inventory_type === 2\" v-model=\"listQuery.event_id\" placeholder=\"活动类型\" clearable style=\"width: 150px; margin-left: 15px;\" class=\"filter-item\">\n      <el-option v-for=\"item in events\" :key=\"item.id\" :label=\"item.title\" :value=\"item.id\" />\n    </el-select>\n    <el-select v-if=\"listQuery.inventory_type === 3\" v-model=\"listQuery.resaler_id\" placeholder=\"分销渠道\" clearable style=\"width: 150px; margin-left: 15px;\" class=\"filter-item\">\n      <el-option v-for=\"item in resalers\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\" />\n    </el-select>\n    <el-select v-model=\"listQuery.product_type\" placeholder=\"产品类型\" clearable style=\"width: 150px; margin-left: 15px;\" class=\"filter-item\" @change=\"getSubType(listQuery.product_type)\">\n      <el-option v-for=\"item in productTypes\" :key=\"item.id\" :label=\"item.title\" :value=\"item.id\" />\n    </el-select>\n    <el-select v-model=\"listQuery.product_sub_type\" placeholder=\"产品分类\" clearable style=\"width: 150px; margin-left: 15px;\" class=\"filter-item\"  @change=\"getSelectedProducts(listQuery.product_sub_type)\">\n      <el-option v-for=\"item in productSubTypes\" :key=\"item.id\" :label=\"item.title\" :value=\"item.id\" />\n    </el-select>\n    <el-select v-model=\"listQuery.product\" placeholder=\"产品\" clearable style=\"width: 150px; margin-left: 15px;\" class=\"filter-item\">\n      <el-option v-for=\"item in selectedProducts\" :key=\"item.id\" :label=\"item.title\" :value=\"item.id\" />\n    </el-select>\n    <el-button v-waves class=\"filter-item\" type=\"primary\" icon=\"el-icon-search\" @click=\"handleFilter\" style=\"width: 100px; margin-left: 15px;\">\n      搜索\n    </el-button>\n    <el-button class=\"filter-item\" style=\"width: 200px; margin-left: 10px;\" type=\"success\" icon=\"el-icon-edit\" @click=\"handleCreate\">\n      添加新出库\n    </el-button>\n  </div>\n\n  <h2>出库详情</h2>\n  <el-table\n    :key=\"tableKey\"\n    v-loading=\"listLoading\"\n    :data=\"inventories\"\n    :span-method=\"objectSpanMethod\"\n    border\n    fit\n    style=\"width: 100%;\"\n  >\n    <el-table-column label=\"订单ID\" prop=\"id\" width=\"80px\" align=\"center\">\n      <template slot-scope=\"{row}\">\n        <span>{{ row.id }}</span>\n      </template>\n    </el-table-column>\n    <el-table-column label=\"出库类型\" prop=\"inventory_type\" width=\"100px\" align=\"center\">\n      <template slot-scope=\"{row}\">\n        <span>{{ row.inventory_out_type }}</span>\n      </template>\n    </el-table-column>\n    <el-table-column label=\"出库时间\" prop=\"inventory_type\" width=\"100px\" align=\"center\">\n      <template slot-scope=\"{row}\">\n        <span>{{moment(row.created_at).format('YYYY-MM-DD')}}</span>\n      </template>\n    </el-table-column>\n    <el-table-column label=\"出库渠道\" width=\"100px\" align=\"center\">\n      <template slot-scope=\"{row}\">\n        <span>{{ row.sales_channel || row.resaler_name || row.event_title }}</span>\n      </template>\n    </el-table-column>\n    <el-table-column label=\"产品类型\" width=\"100px\" align=\"center\">\n      <template slot-scope=\"{row}\">\n        <el-tag class=\"tag\" :color=\"row.tag_color\">{{ row.product_type }}</el-tag>\n      </template>\n    </el-table-column>\n    <el-table-column label=\"产品细类\" width=\"140px\" align=\"center\">\n      <template slot-scope=\"{row}\">\n        <el-tag class=\"sub_type_tag\" :color=\"row.sub_type_tag_color\">{{ row.product_sub_type }}</el-tag>\n      </template>\n    </el-table-column>\n    <el-table-column label=\"产品名称\" width=\"150px\" align=\"center\">\n      <template slot-scope=\"{row}\">\n        <span class=\"link-type\" @click=\"handleUpdate(row)\">{{ row.product_title }}</span>\n      </template>\n    </el-table-column>\n    <el-table-column label=\"产品型号\" width=\"100px\" align=\"center\">\n      <template slot-scope=\"{row}\">\n        <span>{{ row.size }}</span>\n      </template>\n    </el-table-column>\n    <el-table-column label=\"出库数量\" width=\"100px\" align=\"center\">\n      <template slot-scope=\"{row}\">\n        <span>{{ row.quantity }}</span>\n      </template>\n    </el-table-column>\n    <el-table-column label=\"产品成本\" width=\"100px\" align=\"center\">\n      <template slot-scope=\"{row}\">\n        <span>￥{{ row.per_item_cost_atm }}</span>\n      </template>\n    </el-table-column>\n    <el-table-column label=\"出库价格\" width=\"100px\" align=\"center\">\n      <template slot-scope=\"{row}\">\n        <span>￥{{ row.per_item_price_atm }}</span>\n      </template>\n    </el-table-column>\n    <el-table-column label=\"单品优惠\" width=\"100px\" align=\"center\">\n      <template slot-scope=\"{row}\">\n        <span>￥{{ row.per_product_discount }}</span>\n      </template>\n    </el-table-column>\n    <el-table-column label=\"单品折扣\" width=\"100px\" align=\"center\">\n      <template slot-scope=\"{row}\">\n        <span>{{ row.per_product_discount_ratio * 100 }}%</span>\n      </template>\n    </el-table-column>\n    <el-table-column label=\"单品总价\" width=\"100px\" align=\"center\">\n      <template slot-scope=\"{row}\">\n        <span>￥{{ row.total_price}}</span>\n      </template>\n    </el-table-column>\n    <el-table-column label=\"运费成本\" width=\"100px\" align=\"center\">\n      <template slot-scope=\"{row}\">\n        <span>￥{{ row.shipping_cost }}</span>\n      </template>\n    </el-table-column>\n    <el-table-column label=\"其他成本\" width=\"100px\" align=\"center\">\n      <template slot-scope=\"{row}\">\n        <span>￥{{ row.other_cost }}</span>\n      </template>\n    </el-table-column>\n    <el-table-column label=\"订单优惠\" width=\"100px\" align=\"center\">\n      <template slot-scope=\"{row}\">\n        <span>￥{{ row.coupon }}</span>\n      </template>\n    </el-table-column>\n    <el-table-column label=\"订单折扣\" width=\"100px\" align=\"center\">\n      <template slot-scope=\"{row}\">\n        <span>￥{{ row.discount }}</span>\n      </template>\n    </el-table-column>\n    <el-table-column label=\"录入人\" width=\"150px\" align=\"center\">\n      <template slot-scope=\"{row}\">\n        <span>{{ row.added_by_name }}</span>\n      </template>\n    </el-table-column>\n    <el-table-column label=\"查看订单详情\" width=\"150px\" align=\"center\">\n      <el-button type=\"primary\" plain @click=\"addMoreProduct\">详情</el-button>\n    </el-table-column>\n  </el-table>\n\n  <pagination v-show=\"total>0\" :total=\"total\" :page.sync=\"listQuery.page\" :limit.sync=\"listQuery.limit\" @pagination=\"getInventoryOut\" />\n\n  <el-dialog title=\"添加新出库\" :visible.sync=\"dialogFormVisible\" width=\"80%\">\n    <el-form ref=\"dataForm\"\n      :model=\"temp\" \n      label-position=\"left\" \n      label-width=\"10px\" \n      style=\"margin-left:20px;\">\n      <div>\n        <h3 style=\"display: inline-block; width: 100px;\"> 出库类型 </h3>\n        <el-form-item prop=\"type\" style=\"display: inline-block;\">\n          <el-select v-model=\"temp.inventory_out_type\" placeholder=\"选择入库类型\">\n            <el-option v-for=\"item in inventoryOutTypes\" :key=\"item.id\" :label=\"item.title\" :value=\"item.id\" />\n          </el-select>\n        </el-form-item>\n      </div>\n      <div v-if=\"temp.inventory_out_type === 1\">\n        <h3 style=\"display: inline-block; width: 100px;\"> 直销渠道 </h3>\n        <el-form-item prop=\"type\" style=\"display: inline-block;\">\n          <el-select v-model=\"temp.inventory_sales_channel\" placeholder=\"选择入库类型\">\n            <el-option v-for=\"item in salesChannel\" :key=\"item.id\" :label=\"item.title\" :value=\"item.id\" />\n          </el-select>\n        </el-form-item>\n      </div>\n      <div v-if=\"temp.inventory_out_type === 2\">\n        <h3 style=\"display: inline-block; width: 100px;\"> 活动名称 </h3>\n        <el-form-item prop=\"type\" style=\"display: inline-block;\">\n          <el-select v-model=\"temp.event\" placeholder=\"选择入库类型\">\n            <el-option v-for=\"item in events\" :key=\"item.id\" :label=\"item.title\" :value=\"item.id\" />\n          </el-select>\n        </el-form-item>\n      </div>\n      <div v-if=\"temp.inventory_out_type === 3\">\n        <h3 style=\"display: inline-block; width: 100px;\"> 分销渠道 </h3>\n        <el-form-item prop=\"type\" style=\"display: inline-block;\">\n          <el-select v-model=\"temp.event\" placeholder=\"选择入库类型\">\n            <el-option v-for=\"item in resalers\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\" />\n          </el-select>\n        </el-form-item>\n      </div>\n      <div>\n        <h3 style=\"display: inline-block; width: 100px; vertical-align: top; margin-top: 0;\"> 出库产品 </h3>\n        <div style=\"display: inline-block;\">\n          <div style=\" margin-bottom: 5px;\">\n            <div class=\"input-title input-title-extra-long\">产品类型</div>\n            <div class=\"input-title input-title-extra-long\">产品分类</div>\n            <div class=\"input-title input-title-extra-long\">产品名称</div>\n            <div class=\"input-title input-title-short\">零售价</div>\n            <div class=\"input-title input-title-short\">出库数量</div>\n            <div class=\"input-title input-title-short\">产品优惠</div>\n            <div class=\"input-title input-title-short\">产品折扣</div>\n            <div class=\"input-title input-title-short\">总价</div>\n          </div>\n          <el-form-item v-for=\"(item, index) in temp.products\" \n            label=\"\" :key=\"item.id\" prop=\"product\" style=\"margin-bottom: 10px;\">\n            <el-select v-model=\"item.product_type\" placeholder=\"产品类型\" \n              clearable style=\"width: 150px;\" class=\"filter-item\" \n              @change=\"getSubType(item.product_type, item)\"\n              @clear=\"getSubType(item.product_type, item)\">\n              <el-option v-for=\"item in productTypes\" :key=\"item.id\" :label=\"item.title\" :value=\"item.id\" />\n            </el-select>\n            <el-select v-model=\"item.product_sub_type\" class=\"filter-item inventory-in-input-extra\" placeholder=\"产品分类\" \n              clearable @change=\"getProductBySubType(item.product_sub_type, item)\" \n              @clear=\"getProductBySubType(item.product_sub_type, item)\">\n              <el-option v-for=\"item in productSubTypes\" :key=\"item.id\" :label=\"item.title\" :value=\"item.id\" />\n            </el-select>\n            <el-select v-model=\"item.product_id\" class=\"filter-item inventory-in-input-extra\" placeholder=\"产品名称\" \n              clearable @change=\"readProductInfo(item)\"\n              @clear=\"readProductInfo(item)\">\n              <el-option v-for=\"item in products\" :key=\"item.id\" :label=\"item.title\" :value=\"item.id\" />\n            </el-select>\n            <el-input placeholder=\"零售价\" v-model=\"item.price\" :disabled=\"true\" class=\"filter-item inventory-in-input-short\" />\n            <el-input v-model=\"item.quantity\" placeholder=\"数量\" class=\"filter-item inventory-in-input-short\" clearable @change=\"calculateTotalPrice(item)\" />\n            <el-input v-model=\"item.coupon\" placeholder=\"产品优惠\" class=\"filter-item inventory-in-input-short\" clearable @change=\"calculateTotalPrice(item)\"  />\n            <el-input v-model=\"item.discount\" placeholder=\"折扣率\" class=\"filter-item inventory-in-input-short\" clearable @change=\"calculateTotalPrice(item)\"  />\n            <el-input v-model=\"item.total_price\" placeholder=\"总价\" class=\"filter-item inventory-in-input-short\" clearable :disabled=\"true\"/>\n            <el-button style=\"margin-left: 10px;\" type=\"danger\" icon=\"el-icon-delete\" @click=\"removeProduct(index)\" />\n          </el-form-item>\n\n          <el-form-item>\n            <el-button style=\"width: 150px;\" type=\"primary\" plain @click=\"addMoreProduct\">添加产品</el-button>\n          </el-form-item>\n        </div>\n        <div style=\" margin-bottom: 20px; \">\n          <h3 class=\"section-title\"> 优惠信息 </h3>\n          <div style=\"display: inline-block; width: 150px;\">\n            <h3 class=\"middle-title\"> 订单优惠券 </h3>\n            <el-input v-model=\"temp.coupon\" placeholder=\"订单优惠券\" class=\"filter-item\" clearable @change=\"calculateOrderPrice(item)\" />\n          </div>\n          <div style=\"margin-left: 10px; display: inline-block; width: 150px;\">\n            <h3 class=\"middle-title\"> 订单折扣 </h3>\n            <el-input v-model=\"temp.discount\" placeholder=\"订单折扣\" class=\"filter-item\" clearable @change=\"calculateOrderPrice(item)\" />\n          </div>\n          <div style=\"margin-left: 10px; display: inline-block; width: 150px;\">\n            <h3 class=\"middle-title\"> 运费 </h3>\n            <el-input v-model=\"temp.coupon\" placeholder=\"运费\" class=\"filter-item\" clearable @change=\"calculateOrderPrice()\" />\n          </div>\n          <div style=\"margin-left: 10px; display: inline-block; width: 150px;\">\n            <h3 class=\"middle-title\"> 其他优惠 </h3>\n            <el-input v-model=\"temp.coupon\" placeholder=\"其他费用\" class=\"filter-item\" clearable @change=\"calculateOrderPrice(item)\" />\n          </div>\n        </div>\n        <div style=\" margin-bottom: 20px; \">\n          <h3 class=\"section-title\"> 汇总信息 </h3>\n          <div style=\"display: inline-block; width: 150px;\">\n            <h3 class=\"middle-title\"> 订单总价 </h3>\n            <el-input v-model=\"temp.order_total_price\" placeholder=\"订单总价\" class=\"filter-item\" clearable :disabled=\"true\" />\n          </div>\n          <div style=\"margin-left: 10px; display: inline-block; width: 150px;\">\n            <h3 class=\"middle-title\"> 订单总利润 </h3>\n            <el-input v-model=\"temp.order_total_profit\" placeholder=\"订单总利润\" class=\"filter-item\" clearable :disabled=\"true\" />\n          </div>\n        </div>\n        <div>\n          <h3 class=\"section-title\"> 出库备注 </h3>\n          <el-input\n            type=\"textarea\"\n            :autosize=\"{ minRows: 2, maxRows: 4}\"\n            placeholder=\"备注\"\n            v-model=\"temp.note\"\n            style=\"width: 70%\" />\n        </div>\n      </div>\n    </el-form>\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"dialogFormVisible = false\">\n        取消\n      </el-button>\n      <el-button type=\"primary\" @click=\"addNewInventory()\">\n        提交\n      </el-button>\n    </div>\n  </el-dialog>\n</div>\n",null]}